"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[6097],{6097:(X,b,l)=>{l.r(b),l.d(b,{StaffModule:()=>A});var d=l(6895),p=l(27),e=l(4650),g=l(529),u=l(5862),S=l(866);class c{constructor(i,t){this.http=i,this.authService=t}listUsers(){let i=new g.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(u.$g+"/staffs",{headers:i})}listConfig(){let i=new g.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(u.$g+"/staffs/config",{headers:i})}registerUser(i){let t=new g.WM({Authorization:"Bearer "+this.authService.token});return this.http.post(u.$g+"/staffs",i,{headers:t})}showUser(i){let t=new g.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(u.$g+"/staffs/"+i,{headers:t})}updateUser(i,t){let a=new g.WM({Authorization:"Bearer "+this.authService.token});return this.http.post(u.$g+"/staffs/"+i,t,{headers:a})}deleteUser(i){let t=new g.WM({Authorization:"Bearer "+this.authService.token});return this.http.delete(u.$g+"/staffs/"+i,{headers:t})}static#e=this.\u0275fac=function(t){return new(t||c)(e.LFG(g.eN),e.LFG(S.e))};static#t=this.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}var _=l(3125),C=l(9549),M=l(4385),x=l(3238),r=l(433);function q(o,i){if(1&o&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function w(o,i){if(1&o&&(e.TgZ(0,"div",49),e._UZ(1,"img",50),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.IMAGEN_PREVIZUALIZA,e.LSH)}}function J(o,i){if(1&o&&(e.TgZ(0,"div",51)(1,"div",52)(2,"div",53)(3,"strong"),e._uU(4,"\xc9xito!"),e.qZA(),e._uU(5),e.TgZ(6,"button",54),e._UZ(7,"span",55),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",t.text_success,". ")}}function E(o,i){if(1&o&&(e.TgZ(0,"div",51)(1,"div",52)(2,"div",56)(3,"strong"),e._uU(4,"!"),e.qZA(),e._uU(5),e.TgZ(6,"button",54),e._UZ(7,"span",55),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",t.text_validation,". ")}}const y=function(){return{standalone:!0}};class h{constructor(i){this.staffService=i,this.name="",this.surname="",this.mobile="",this.email="",this.password="",this.password_confirmation="",this.birth_date="",this.gender=1,this.education="",this.designation="",this.address="",this.roles=[],this.IMAGEN_PREVIZUALIZA="assets/img/user-06.jpg",this.text_success="",this.text_validation=""}ngOnInit(){this.staffService.listConfig().subscribe(i=>{console.log(i),this.roles=i.roles})}save(){if(this.text_validation="",!(this.name&&this.email&&this.surname&&this.FILE_AVATAR&&this.password))return void(this.text_validation="LOS CAMPOS SON NECESARIOS (name,surname,email,avatar)");if(this.password!=this.password_confirmation)return void(this.text_validation="LAS CONTRASE\xd1A DEBEN SER IGUALES");console.log(this.selectedValue);let i=new FormData;i.append("name",this.name),i.append("surname",this.surname),i.append("email",this.email),i.append("mobile",this.mobile),i.append("birth_date",this.birth_date),i.append("gender",this.gender+""),i.append("education",this.education),i.append("designation",this.designation),i.append("address",this.address),i.append("password",this.password),i.append("role_id",this.selectedValue),i.append("imagen",this.FILE_AVATAR),this.staffService.registerUser(i).subscribe(t=>{console.log(t),403==t.message?this.text_validation=t.message_text:(this.text_success="El usuario ha sido registrado correctamente",this.name="",this.surname="",this.email="",this.mobile="",this.birth_date="",this.gender=1,this.education="",this.designation="",this.address="",this.password="",this.password_confirmation="",this.selectedValue="",this.FILE_AVATAR=null,this.IMAGEN_PREVIZUALIZA=null)})}loadFile(i){if(i.target.files[0].type.indexOf("image")<0)return void(this.text_validation="SOLAMENTE PUEDEN SER ARCHIVOS DE TIPO IMAGEN");this.text_validation="",this.FILE_AVATAR=i.target.files[0];let t=new FileReader;t.readAsDataURL(this.FILE_AVATAR),t.onloadend=()=>this.IMAGEN_PREVIZUALIZA=t.result}static#e=this.\u0275fac=function(t){return new(t||h)(e.Y36(c))};static#t=this.\u0275cmp=e.Xpm({type:h,selectors:[["app-add-staff-n"]],decls:136,vars:21,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"col-12"],[1,"form-heading"],[1,"col-12","col-md-6","col-xl-4"],[1,"form-group","local-forms"],[1,"login-danger"],["name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","surname","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","mobile","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-md-6","col-xl-6"],["name","email","type","email",1,"form-control",3,"ngModel","ngModelChange"],["name","password","type","password",1,"form-control",3,"ngModel","ngModelChange"],["name","password_confirmation","type","password",1,"form-control",3,"ngModel","ngModelChange"],["name","birth_date","type","text","matInput","",1,"form-control","datetimepicker",3,"ngModel","matDatepicker","ngModelChange"],["picker",""],["matIconSuffix","",3,"for"],[1,"form-group","select-gender"],[1,"gen-label"],[1,"form-check-inline"],[1,"form-check-label"],["type","radio","name","gender","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","gender","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["name","education","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","designation","type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Seleccione Rol",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12"],["name","address","rows","3","cols","30",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","local-top-form"],[1,"local-top"],[1,"settings-btn","upload-files-avator"],["type","file","accept","image/*","name","image","id","file",1,"hide-input",3,"change"],["for","file",1,"upload"],["class","",4,"ngIf"],["class","form-group row my-4",4,"ngIf"],[1,"doctor-submit","text-end"],["type","button",1,"btn","btn-primary","submit-form","me-2",3,"click"],[3,"value"],[1,""],["width","250","alt","","srcset","",3,"src"],[1,"form-group","row","my-4"],[1,"col-md-8"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Cerrar",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8,"Personal "),e.qZA()(),e.TgZ(9,"li",6),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"li",9),e._uU(12,"Agregar Personal"),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"form")(18,"div",3)(19,"div",12)(20,"div",13)(21,"h4"),e._uU(22,"Agregar Personal"),e.qZA()()(),e.TgZ(23,"div",14)(24,"div",15)(25,"label"),e._uU(26,"Nombre "),e.TgZ(27,"span",16),e._uU(28,"*"),e.qZA()(),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(s){return a.name=s}),e.qZA()()(),e.TgZ(30,"div",14)(31,"div",15)(32,"label"),e._uU(33,"Apellido "),e.TgZ(34,"span",16),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"input",18),e.NdJ("ngModelChange",function(s){return a.surname=s}),e.qZA()()(),e.TgZ(37,"div",14)(38,"div",15)(39,"label"),e._uU(40,"Tel\xe9fono "),e.TgZ(41,"span",16),e._uU(42,"*"),e.qZA()(),e.TgZ(43,"input",19),e.NdJ("ngModelChange",function(s){return a.mobile=s}),e.qZA()()(),e.TgZ(44,"div",20)(45,"div",15)(46,"label"),e._uU(47,"Correo Electr\xf3nico "),e.TgZ(48,"span",16),e._uU(49,"*"),e.qZA()(),e.TgZ(50,"input",21),e.NdJ("ngModelChange",function(s){return a.email=s}),e.qZA()()(),e.TgZ(51,"div",20)(52,"div",15)(53,"label"),e._uU(54,"Contrase\xf1a "),e.TgZ(55,"span",16),e._uU(56,"*"),e.qZA()(),e.TgZ(57,"input",22),e.NdJ("ngModelChange",function(s){return a.password=s}),e.qZA()()(),e.TgZ(58,"div",20)(59,"div",15)(60,"label"),e._uU(61,"Confirmar Contrase\xf1a "),e.TgZ(62,"span",16),e._uU(63,"*"),e.qZA()(),e.TgZ(64,"input",23),e.NdJ("ngModelChange",function(s){return a.password_confirmation=s}),e.qZA()()(),e.TgZ(65,"div",20)(66,"div",15)(67,"label"),e._uU(68,"Fecha de Nacimiento "),e.TgZ(69,"span",16),e._uU(70,"*"),e.qZA()(),e.TgZ(71,"input",24),e.NdJ("ngModelChange",function(s){return a.birth_date=s}),e.qZA(),e._UZ(72,"mat-datepicker",null,25)(74,"mat-datepicker-toggle",26),e.qZA()(),e.TgZ(75,"div",20)(76,"div",27)(77,"label",28),e._uU(78,"G\xe9nero"),e.TgZ(79,"span",16),e._uU(80,"*"),e.qZA()(),e.TgZ(81,"div",29)(82,"label",30)(83,"input",31),e.NdJ("ngModelChange",function(s){return a.gender=s}),e.qZA(),e._uU(84,"Masculino "),e.qZA()(),e.TgZ(85,"div",29)(86,"label",30)(87,"input",32),e.NdJ("ngModelChange",function(s){return a.gender=s}),e.qZA(),e._uU(88,"Femenino "),e.qZA()()()(),e.TgZ(89,"div",14)(90,"div",15)(91,"label"),e._uU(92,"Educaci\xf3n "),e.TgZ(93,"span",16),e._uU(94,"*"),e.qZA()(),e.TgZ(95,"input",33),e.NdJ("ngModelChange",function(s){return a.education=s}),e.qZA()()(),e.TgZ(96,"div",14)(97,"div",15)(98,"label"),e._uU(99,"Cargo "),e.TgZ(100,"span",16),e._uU(101,"*"),e.qZA()(),e.TgZ(102,"input",34),e.NdJ("ngModelChange",function(s){return a.designation=s}),e.qZA()()(),e.TgZ(103,"div",14)(104,"div",15)(105,"label"),e._uU(106,"Roles "),e.TgZ(107,"span",16),e._uU(108,"*"),e.qZA()(),e.TgZ(109,"mat-select",35),e.NdJ("ngModelChange",function(s){return a.selectedValue=s}),e.YNc(110,q,2,2,"mat-option",36),e.qZA()()(),e.TgZ(111,"div",37)(112,"div",15)(113,"label"),e._uU(114,"Direcci\xf3n "),e.TgZ(115,"span",16),e._uU(116,"*"),e.qZA()(),e.TgZ(117,"textarea",38),e.NdJ("ngModelChange",function(s){return a.address=s}),e.qZA()()(),e.TgZ(118,"div",20)(119,"div",39)(120,"label",40),e._uU(121,"Avatar "),e.TgZ(122,"span",16),e._uU(123,"*"),e.qZA()(),e.TgZ(124,"div",41)(125,"input",42),e.NdJ("change",function(s){return a.loadFile(s)}),e.qZA(),e.TgZ(126,"label",43),e._uU(127,"Seleccionar Archivo"),e.qZA()()(),e.YNc(128,w,2,1,"div",44),e.qZA(),e.TgZ(129,"div",12),e.YNc(130,J,8,1,"div",45),e.YNc(131,E,8,1,"div",45),e.qZA(),e.TgZ(132,"div",12)(133,"div",46)(134,"button",47),e.NdJ("click",function(){return a.save()}),e._uU(135,"Guardar"),e.qZA()()()()()()()()()()()),2&t){const n=e.MAs(73);e.xp6(29),e.Q6J("ngModel",a.name),e.xp6(7),e.Q6J("ngModel",a.surname),e.xp6(7),e.Q6J("ngModel",a.mobile),e.xp6(7),e.Q6J("ngModel",a.email),e.xp6(7),e.Q6J("ngModel",a.password),e.xp6(7),e.Q6J("ngModel",a.password_confirmation),e.xp6(7),e.Q6J("ngModel",a.birth_date)("matDatepicker",n),e.xp6(3),e.Q6J("for",n),e.xp6(9),e.Q6J("ngModel",a.gender),e.xp6(4),e.Q6J("ngModel",a.gender),e.xp6(8),e.Q6J("ngModel",a.education),e.xp6(7),e.Q6J("ngModel",a.designation),e.xp6(7),e.Q6J("ngModel",a.selectedValue)("ngModelOptions",e.DdM(20,y)),e.xp6(1),e.Q6J("ngForOf",a.roles),e.xp6(7),e.Q6J("ngModel",a.address),e.xp6(11),e.Q6J("ngIf",a.FILE_AVATAR),e.xp6(2),e.Q6J("ngIf",a.text_success),e.xp6(1),e.Q6J("ngIf",a.text_validation)}},dependencies:[d.sg,d.O5,_.Mq,_.hl,_.nW,C.R9,M.gD,x.ey,r._Y,r.Fj,r._,r.JJ,r.JL,r.On,r.F]})}var I=l(7155),N=l(6308);const L=function(o){return["/staffs/list-staff/edit-staff/",o]};function k(o,i){if(1&o&&(e.TgZ(0,"a",68),e._UZ(1,"i",69),e._uU(2," Edit"),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.Q6J("routerLink",e.VKq(1,L,t.id))}}function F(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"a",70),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.selectUser(n))}),e._UZ(1,"i",71),e._uU(2," Delete"),e.qZA()}if(2&o){const t=e.oxw(2).$implicit;e.uIk("data-bs-target","#delete_staff-"+t.id)}}function P(o,i){if(1&o&&(e.TgZ(0,"div",62)(1,"a",63),e._UZ(2,"i",64),e.qZA(),e.TgZ(3,"div",65),e.YNc(4,k,3,3,"a",66),e.YNc(5,F,3,1,"a",67),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.isPermision("edit_staff")),e.xp6(1),e.Q6J("ngIf",t.isPermision("delete_staff"))}}function Q(o,i){if(1&o&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("Are you sure want to delete this user ",t.staff_selected.email,"?")}}function D(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",51),e.YNc(14,P,6,2,"div",52),e.qZA(),e.TgZ(15,"div",53)(16,"div",54)(17,"div",55)(18,"div",56),e._UZ(19,"img",57),e.YNc(20,Q,2,1,"h3",58),e.TgZ(21,"div",59)(22,"a",60),e._uU(23,"Close"),e.qZA(),e.TgZ(24,"button",61),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteUser())}),e._uU(25,"Delete"),e.qZA()()()()()()()}if(2&o){const t=i.$implicit,a=e.oxw();e.xp6(2),e.Oqu(t.name+" "+(t.surname?t.surname:"")),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.mobile),e.xp6(2),e.Oqu(t.birth_date),e.xp6(2),e.Oqu(t.role.name),e.xp6(2),e.Oqu(t.created_at),e.xp6(2),e.Q6J("ngIf",1!=t.id),e.xp6(1),e.uIk("id","delete_staff-"+t.id),e.xp6(5),e.Q6J("ngIf",a.staff_selected)}}function R(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.moveToPage(n.currentPage-2))}),e.TgZ(1,"a",74),e._uU(2," ... "),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("hidden",1===t.currentPage)}}function O(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.moveToPage(n.currentPage+2))}),e.TgZ(1,"a",74),e._uU(2," ... "),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("hidden",t.currentPage>=t.pageNumberArray[t.pageNumberArray.length-2]||t.totalData<t.serialNumberArray[t.serialNumberArray.length-1])}}function G(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",48)(2,"a",50),e.NdJ("click",function(){const s=e.CHM(t).$implicit,T=e.oxw();return e.KtG(T.moveToPage(s))}),e._uU(3),e.qZA()(),e.YNc(4,R,3,1,"li",72),e.YNc(5,O,3,1,"li",72),e.BQk()}if(2&o){const t=i.$implicit,a=i.index,n=e.oxw();e.xp6(1),e.ekj("active",t===n.currentPage),e.Q6J("ngClass",n.pageNumberArray[n.currentPage-2]>t&&1!==t&&n.pageNumberArray.length>6||n.pageNumberArray[n.currentPage]<t&&1!==t&&n.pageNumberArray.length>6&&n.pageNumberArray.length!==t?"hide-page-no":"show-page-no"),e.xp6(2),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",0===a&&n.pageNumberArray.length>6&&n.currentPage>2),e.xp6(1),e.Q6J("ngIf",a===n.pageNumberArray.length-2&&n.pageNumberArray.length>6)}}const U=function(o){return{disabled:o}};class f{constructor(i){this.staffService=i,this.usersList=[],this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.role_generals=[]}ngOnInit(){this.getTableData(),this.user=this.staffService.authService.user}getTableData(){this.usersList=[],this.serialNumberArray=[],this.staffService.listUsers().subscribe(i=>{console.log(i),this.totalData=i.users.data.length,this.role_generals=i.users.data,this.getTableDataGeneral()})}isPermision(i){return!(!this.user.roles.includes("Super-Admin")&&!this.user.permissions.includes(i))}getTableDataGeneral(){this.usersList=[],this.serialNumberArray=[],this.role_generals.map((i,t)=>{const a=t+1;t>=this.skip&&a<=this.limit&&(this.usersList.push(i),this.serialNumberArray.push(a))}),this.dataSource=new I.by(this.usersList),this.calculateTotalPages(this.totalData,this.pageSize)}selectUser(i){this.staff_selected=i}deleteUser(){this.staffService.deleteUser(this.staff_selected.id).subscribe(i=>{console.log(i);let t=this.usersList.findIndex(a=>a.id==this.staff_selected.id);-1!=t&&(this.usersList.splice(t,1),$("#delete_patient").hide(),$("#delete_patient").removeClass("show"),$(".modal-backdrop").remove(),$("body").removeClass(),$("body").removeAttr("style"),this.staff_selected=null)})}searchData(i){this.dataSource.filter=i.trim().toLowerCase(),this.usersList=this.dataSource.filteredData}sortData(i){const t=this.usersList.slice();this.usersList=i.active&&""!==i.direction?t.sort((a,n)=>(a[i.active]<n[i.active]?-1:1)*("asc"===i.direction?1:-1)):t}getMoreData(i){"next"==i?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral()):"previous"==i&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral())}moveToPage(i){this.currentPage=i,this.skip=this.pageSelection[i-1].skip,this.limit=this.pageSelection[i-1].limit,i>this.currentPage?this.pageIndex=i-1:i<this.currentPage&&(this.pageIndex=i+1),this.getTableDataGeneral()}PageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.searchDataValue="",this.getTableDataGeneral()}calculateTotalPages(i,t){this.pageNumberArray=[],this.totalPages=i/t,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var a=1;a<=this.totalPages;a++){const n=t*a,s=n-t;this.pageNumberArray.push(a),this.pageSelection.push({skip:s,limit:n})}}static#e=this.\u0275fac=function(t){return new(t||f)(e.Y36(c))};static#t=this.\u0275cmp=e.Xpm({type:f,selectors:[["app-list-staff-n"]],decls:75,vars:12,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],[1,"add-group"],["routerLink","/staffs/add-staff",1,"btn","btn-primary","add-pluss","ms-2"],["src","assets/img/icons/plus.svg","alt",""],["href","javascript:;",1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],[1,"col-auto","text-end","float-end","ms-auto","download-grp"],["href","javascript:;",1,"me-2"],["src","assets/img/icons/pdf-icon-01.svg","alt",""],["src","assets/img/icons/pdf-icon-02.svg","alt",""],["src","assets/img/icons/pdf-icon-03.svg","alt",""],["href","javascript:;"],["src","assets/img/icons/pdf-icon-04.svg","alt",""],[1,"table-responsive"],["matSort","",1,"table","border-0","custom-table","comman-table","datatable","mb-0",3,"matSortChange"],["mat-sort-header","name"],["mat-sort-header","email"],["mat-sort-header","mobile"],["mat-sort-header","birth_date"],["mat-sort-header","role"],["mat-sort-header","created_at"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],[1,"text-end"],["class","dropdown dropdown-action",4,"ngIf"],["role","dialog",1,"modal","fade","delete-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center"],["src","assets/img/sent.png","alt","","width","50","height","46"],[4,"ngIf"],[1,"m-t-20"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1"],["type","submit",1,"btn","btn-danger",3,"click"],[1,"dropdown","dropdown-action"],["href","javascript:void(0);","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item",3,"routerLink",4,"ngIf"],["class","dropdown-item","href","javascript:void(0);","data-bs-toggle","modal",3,"click",4,"ngIf"],[1,"dropdown-item",3,"routerLink"],[1,"fa-solid","fa-pen-to-square","m-r-5"],["href","javascript:void(0);","data-bs-toggle","modal",1,"dropdown-item",3,"click"],[1,"fa","fa-trash-alt","m-r-5"],["class","page-item",3,"hidden","click",4,"ngIf"],[1,"page-item",3,"hidden","click"],["href","javascript:void(0);",1,"page-link"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8,"Staffs "),e.qZA()(),e.TgZ(9,"li",6),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"li",9),e._uU(12,"Staff List"),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"h3"),e._uU(22,"Staff List"),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"input",18),e.NdJ("ngModelChange",function(s){return a.searchDataValue=s})("ngModelChange",function(){return a.searchData(a.searchDataValue)}),e.qZA(),e.TgZ(26,"a",19),e._UZ(27,"img",20),e.qZA()(),e.TgZ(28,"div",21)(29,"a",22),e._UZ(30,"img",23),e.qZA(),e.TgZ(31,"a",24),e.NdJ("click",function(){return a.PageSize()}),e._UZ(32,"img",25),e.qZA()()()()(),e.TgZ(33,"div",26)(34,"a",27),e._UZ(35,"img",28),e.qZA(),e.TgZ(36,"a",27),e._UZ(37,"img",29),e.qZA(),e.TgZ(38,"a",27),e._UZ(39,"img",30),e.qZA(),e.TgZ(40,"a",31),e._UZ(41,"img",32),e.qZA()()()(),e.TgZ(42,"div",33)(43,"table",34),e.NdJ("matSortChange",function(s){return a.sortData(s)}),e.TgZ(44,"thead")(45,"tr")(46,"th",35),e._uU(47,"Nombres y Apellidos"),e.qZA(),e.TgZ(48,"th",36),e._uU(49,"Email"),e.qZA(),e.TgZ(50,"th",37),e._uU(51,"Telefono"),e.qZA(),e.TgZ(52,"th",38),e._uU(53,"Fecha de cumplea\xf1os"),e.qZA(),e.TgZ(54,"th",39),e._uU(55,"Rol"),e.qZA(),e.TgZ(56,"th",40),e._uU(57,"Fecha de registro"),e.qZA(),e._UZ(58,"th"),e.qZA()(),e.TgZ(59,"tbody"),e.YNc(60,D,26,9,"tr",41),e.qZA()(),e.TgZ(61,"div",42)(62,"div",43)(63,"div",44),e._uU(64),e.qZA()(),e.TgZ(65,"div",45)(66,"div",46)(67,"ul",47)(68,"li",48)(69,"a",49),e.NdJ("click",function(){return a.getMoreData("previous")}),e._uU(70,"Previous"),e.qZA()(),e.YNc(71,G,6,6,"ng-container",41),e.TgZ(72,"li",48)(73,"a",50),e.NdJ("click",function(){return a.getMoreData("next")}),e._uU(74,"Next "),e.qZA()()()()()()()()()()()()()),2&t&&(e.xp6(25),e.Q6J("ngModel",a.searchDataValue),e.xp6(35),e.Q6J("ngForOf",a.usersList),e.xp6(4),e.lnq(" Showing ",a.serialNumberArray[0]," to ",a.serialNumberArray[a.serialNumberArray.length-1]," of ",a.totalData," entries "),e.xp6(4),e.Q6J("ngClass",e.VKq(8,U,1===a.currentPage)),e.xp6(3),e.Q6J("ngForOf",a.pageNumberArray),e.xp6(1),e.Q6J("ngClass",e.VKq(10,U,a.currentPage===a.pageNumberArray[a.pageNumberArray.length-1]||0===a.usersList.length)))},dependencies:[d.mk,d.sg,d.O5,p.rH,N.YE,N.nU,r.Fj,r.JJ,r.On]})}class m{static#e=this.\u0275fac=function(t){return new(t||m)};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["app-staff"]],decls:1,vars:0,template:function(t,a){1&t&&e._UZ(0,"router-outlet")},dependencies:[p.lC]})}function V(o,i){if(1&o&&(e.TgZ(0,"mat-option",48),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function j(o,i){if(1&o&&(e.TgZ(0,"div",49),e._UZ(1,"img",50),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.IMAGEN_PREVIZUALIZA,e.LSH)}}function H(o,i){if(1&o&&(e.TgZ(0,"div",51)(1,"div",52)(2,"div",53)(3,"strong"),e._uU(4,"Exito!"),e.qZA(),e._uU(5),e.TgZ(6,"button",54),e._UZ(7,"span",55),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.text_success,". ")}}function Y(o,i){if(1&o&&(e.TgZ(0,"div",51)(1,"div",52)(2,"div",56)(3,"strong"),e._uU(4,"!"),e.qZA(),e._uU(5),e.TgZ(6,"button",54),e._UZ(7,"span",55),e.qZA()()()()),2&o){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.text_validation,". ")}}const K=function(){return{standalone:!0}};function z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"form")(2,"div",3)(3,"div",13)(4,"div",14)(5,"h4"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",15)(8,"div",16)(9,"label"),e._uU(10,"First Name "),e.TgZ(11,"span",17),e._uU(12,"*"),e.qZA()(),e.TgZ(13,"input",18),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.name=n)}),e.qZA()()(),e.TgZ(14,"div",15)(15,"div",16)(16,"label"),e._uU(17,"Surname "),e.TgZ(18,"span",17),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"input",19),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.surname=n)}),e.qZA()()(),e.TgZ(21,"div",15)(22,"div",16)(23,"label"),e._uU(24,"Mobile "),e.TgZ(25,"span",17),e._uU(26,"*"),e.qZA()(),e.TgZ(27,"input",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.mobile=n)}),e.qZA()()(),e.TgZ(28,"div",21)(29,"div",16)(30,"label"),e._uU(31,"Email "),e.TgZ(32,"span",17),e._uU(33,"*"),e.qZA()(),e.TgZ(34,"input",22),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.email=n)}),e.qZA()()(),e.TgZ(35,"div",21)(36,"div",16)(37,"label"),e._uU(38,"Password "),e.TgZ(39,"span",17),e._uU(40,"*"),e.qZA()(),e.TgZ(41,"input",23),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.password=n)}),e.qZA()()(),e.TgZ(42,"div",21)(43,"div",16)(44,"label"),e._uU(45,"Confirm Password "),e.TgZ(46,"span",17),e._uU(47,"*"),e.qZA()(),e.TgZ(48,"input",24),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.password_confirmation=n)}),e.qZA()()(),e.TgZ(49,"div",21)(50,"div",16)(51,"label"),e._uU(52,"Date Of Birth "),e.TgZ(53,"span",17),e._uU(54,"*"),e.qZA()(),e.TgZ(55,"input",25),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.birth_date=n)}),e.qZA(),e._UZ(56,"mat-datepicker",null,26)(58,"mat-datepicker-toggle",27),e.qZA()(),e.TgZ(59,"div",21)(60,"div",28)(61,"label",29),e._uU(62,"Gender"),e.TgZ(63,"span",17),e._uU(64,"*"),e.qZA()(),e.TgZ(65,"div",30)(66,"label",31)(67,"input",32),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.gender=n)}),e.qZA(),e._uU(68,"Male "),e.qZA()(),e.TgZ(69,"div",30)(70,"label",31)(71,"input",32),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.gender=n)}),e.qZA(),e._uU(72,"Female "),e.qZA()()()(),e.TgZ(73,"div",15)(74,"div",16)(75,"label"),e._uU(76,"Education "),e.TgZ(77,"span",17),e._uU(78,"*"),e.qZA()(),e.TgZ(79,"input",33),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.education=n)}),e.qZA()()(),e.TgZ(80,"div",15)(81,"div",16)(82,"label"),e._uU(83,"Designation "),e.TgZ(84,"span",17),e._uU(85,"*"),e.qZA()(),e.TgZ(86,"input",34),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.designation=n)}),e.qZA()()(),e.TgZ(87,"div",15)(88,"div",16)(89,"label"),e._uU(90,"Roles "),e.TgZ(91,"span",17),e._uU(92,"*"),e.qZA()(),e.TgZ(93,"mat-select",35),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.selectedValue=n)}),e.YNc(94,V,2,2,"mat-option",36),e.qZA()()(),e.TgZ(95,"div",37)(96,"div",16)(97,"label"),e._uU(98,"Address "),e.TgZ(99,"span",17),e._uU(100,"*"),e.qZA()(),e.TgZ(101,"textarea",38),e.NdJ("ngModelChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.address=n)}),e.qZA()()(),e.TgZ(102,"div",21)(103,"div",39)(104,"label",40),e._uU(105,"Avatar "),e.TgZ(106,"span",17),e._uU(107,"*"),e.qZA()(),e.TgZ(108,"div",41)(109,"input",42),e.NdJ("change",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.loadFile(n))}),e.qZA(),e.TgZ(110,"label",43),e._uU(111,"Choose File"),e.qZA()()(),e.YNc(112,j,2,1,"div",44),e.qZA(),e.TgZ(113,"div",13),e.YNc(114,H,8,1,"div",45),e.YNc(115,Y,8,1,"div",45),e.qZA(),e.TgZ(116,"div",13)(117,"div",46)(118,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.save())}),e._uU(119,"Guardar"),e.qZA()()()()()()}if(2&o){const t=e.MAs(57),a=e.oxw();e.xp6(6),e.hij("Staff Edit : #",a.staff_selected.id,""),e.xp6(7),e.Q6J("ngModel",a.name),e.xp6(7),e.Q6J("ngModel",a.surname),e.xp6(7),e.Q6J("ngModel",a.mobile),e.xp6(7),e.Q6J("ngModel",a.email),e.xp6(7),e.Q6J("ngModel",a.password),e.xp6(7),e.Q6J("ngModel",a.password_confirmation),e.xp6(7),e.Q6J("ngModel",a.birth_date)("matDatepicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(9),e.Q6J("value",1)("ngModel",a.gender),e.xp6(4),e.Q6J("value",2)("ngModel",a.gender),e.xp6(8),e.Q6J("ngModel",a.education),e.xp6(7),e.Q6J("ngModel",a.designation),e.xp6(7),e.Q6J("ngModel",a.selectedValue)("ngModelOptions",e.DdM(23,K)),e.xp6(1),e.Q6J("ngForOf",a.roles),e.xp6(7),e.Q6J("ngModel",a.address),e.xp6(11),e.Q6J("ngIf",a.IMAGEN_PREVIZUALIZA),e.xp6(2),e.Q6J("ngIf",a.text_success),e.xp6(1),e.Q6J("ngIf",a.text_validation)}}class Z{constructor(i,t){this.staffService=i,this.activedRoute=t,this.name="",this.surname="",this.mobile="",this.email="",this.password="",this.password_confirmation="",this.birth_date="",this.gender=1,this.education="",this.designation="",this.address="",this.roles=[],this.IMAGEN_PREVIZUALIZA="assets/img/user-06.jpg",this.text_success="",this.text_validation=""}ngOnInit(){this.activedRoute.params.subscribe(i=>{console.log(i),this.staff_id=i.id}),this.staffService.showUser(this.staff_id).subscribe(i=>{console.log(i),this.staff_selected=i.user,this.selectedValue=this.staff_selected.role.id,this.name=this.staff_selected.name,this.surname=this.staff_selected.surname,this.mobile=this.staff_selected.mobile,this.email=this.staff_selected.email,this.birth_date=new Date(this.staff_selected.birth_date).toISOString(),this.gender=this.staff_selected.gender,this.education=this.staff_selected.education,this.designation=this.staff_selected.designation,this.address=this.staff_selected.address,this.IMAGEN_PREVIZUALIZA=this.staff_selected.avatar}),this.staffService.listConfig().subscribe(i=>{console.log(i),this.roles=i.roles})}save(){if(this.text_validation="",!this.name||!this.email||!this.surname)return void(this.text_validation="LOS CAMPOS SON NECESARIOS (name,surname,email)");if(this.password&&this.password!=this.password_confirmation)return void(this.text_validation="LAS CONTRASE\xd1A DEBEN SER IGUALES");console.log(this.selectedValue);let i=new FormData;i.append("name",this.name),i.append("surname",this.surname),i.append("email",this.email),i.append("mobile",this.mobile),i.append("birth_date",this.birth_date),i.append("gender",this.gender+""),this.education&&i.append("education",this.education),this.designation&&i.append("designation",this.designation),this.address&&i.append("address",this.address),this.password&&i.append("password",this.password),i.append("role_id",this.selectedValue),this.FILE_AVATAR&&i.append("imagen",this.FILE_AVATAR),this.staffService.updateUser(this.staff_id,i).subscribe(t=>{console.log(t),403==t.message?this.text_validation=t.message_text:this.text_success="El usuario ha editado correctamente"})}loadFile(i){if(i.target.files[0].type.indexOf("image")<0)return void(this.text_validation="SOLAMENTE PUEDEN SER ARCHIVOS DE TIPO IMAGEN");this.text_validation="",this.FILE_AVATAR=i.target.files[0];let t=new FileReader;t.readAsDataURL(this.FILE_AVATAR),t.onloadend=()=>this.IMAGEN_PREVIZUALIZA=t.result}static#e=this.\u0275fac=function(t){return new(t||Z)(e.Y36(c),e.Y36(p.gz))};static#t=this.\u0275cmp=e.Xpm({type:Z,selectors:[["app-edit-staff-n"]],decls:17,vars:1,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"col-12"],[1,"form-heading"],[1,"col-12","col-md-6","col-xl-4"],[1,"form-group","local-forms"],[1,"login-danger"],["name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","surname","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","mobile","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-md-6","col-xl-6"],["name","email","type","email",1,"form-control",3,"ngModel","ngModelChange"],["name","password","type","password",1,"form-control",3,"ngModel","ngModelChange"],["name","password_confirmation","type","password",1,"form-control",3,"ngModel","ngModelChange"],["name","birth_date","type","text","matInput","",1,"form-control","datetimepicker",3,"ngModel","matDatepicker","ngModelChange"],["picker",""],["matIconSuffix","",3,"for"],[1,"form-group","select-gender"],[1,"gen-label"],[1,"form-check-inline"],[1,"form-check-label"],["type","radio","name","gender",1,"form-check-input",3,"value","ngModel","ngModelChange"],["name","education","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","designation","type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Select  Role",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12"],["name","address","rows","3","cols","30",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","local-top-form"],[1,"local-top"],[1,"settings-btn","upload-files-avator"],["type","file","accept","image/*","name","image","id","file",1,"hide-input",3,"change"],["for","file",1,"upload"],["class","",4,"ngIf"],["class","form-group row my-4",4,"ngIf"],[1,"doctor-submit","text-end"],["type","button",1,"btn","btn-primary","submit-form","me-2",3,"click"],[3,"value"],[1,""],["width","250","alt","","srcset","",3,"src"],[1,"form-group","row","my-4"],[1,"col-md-8"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8,"Staffs "),e.qZA()(),e.TgZ(9,"li",6),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"li",9),e._uU(12,"Edit Staffs"),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"div",10),e.YNc(16,z,120,24,"div",11),e.qZA()()()()()),2&t&&(e.xp6(16),e.Q6J("ngIf",a.staff_selected))},dependencies:[d.sg,d.O5,_.Mq,_.hl,_.nW,C.R9,M.gD,x.ey,r._Y,r.Fj,r._,r.JJ,r.JL,r.On,r.F]})}const B=[{path:"",component:m,children:[{path:"add-staff",component:h},{path:"list-staff",component:f},{path:"list-staff/edit-staff/:id",component:Z}]}];class v{static#e=this.\u0275fac=function(t){return new(t||v)};static#t=this.\u0275mod=e.oAB({type:v});static#i=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(B),p.Bz]})}var W=l(9079);class A{static#e=this.\u0275fac=function(t){return new(t||A)};static#t=this.\u0275mod=e.oAB({type:A});static#i=this.\u0275inj=e.cJS({imports:[d.ez,v,W.m,r.u5,r.UX,g.JF,p.Bz]})}}}]);