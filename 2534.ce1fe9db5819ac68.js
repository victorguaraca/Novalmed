"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[2534],{2534:(Zt,q,p)=>{p.r(q),p.d(q,{AppointmentModule:()=>b});var m=p(6895),u=p(27),t=p(4650);class h{static#t=this.\u0275fac=function(e){return new(e||h)};static#e=this.\u0275cmp=t.Xpm({type:h,selectors:[["app-appointment"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[u.lC]})}var d=p(529),c=p(5862),S=p(866);class _{constructor(n,e){this.http=n,this.authService=e}listAppointments(n=1,e="",i="",a=null){let s=new d.WM({Authorization:"Bearer "+this.authService.token}),r="";return e&&(r+="&search="+e),i&&(r+="&specialitie_id="+i),a&&(r+="&date="+a),this.http.get(c.$g+"/appointmet?page="+n+r,{headers:s})}listConfig(){let n=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(c.$g+"/appointmet/config",{headers:n})}listPatient(n=""){let e=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(c.$g+"/appointmet/patient?n_document="+n,{headers:e})}registerAppointment(n){let e=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.post(c.$g+"/appointmet",n,{headers:e})}listFilter(n){let e=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.post(c.$g+"/appointmet/filter",n,{headers:e})}showAppointment(n){let e=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(c.$g+"/appointmet/"+n,{headers:e})}updateAppointment(n,e){let i=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.put(c.$g+"/appointmet/"+n,e,{headers:i})}deleteAppointment(n){let e=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.delete(c.$g+"/appointmet/"+n,{headers:e})}registerAttention(n){let e=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.post(c.$g+"/appointmet-attention",n,{headers:e})}showAppointmentAttention(n){let e=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(c.$g+"/appointmet-attention/"+n,{headers:e})}static#t=this.\u0275fac=function(e){return new(e||_)(t.LFG(d.eN),t.LFG(S.e))};static#e=this.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}var g=p(3125),x=p(9549),C=p(4385),M=p(3238),l=p(433);function y(o,n){if(1&o&&(t.TgZ(0,"mat-option",51),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function k(o,n){if(1&o&&(t.TgZ(0,"mat-option",51),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function D(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td")(7,"button",52),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.showSegment(s))}),t._uU(8,"+"),t.qZA()()(),t.BQk()}if(2&o){const e=n.$implicit,i=t.oxw();t.xp6(3),t.Oqu(e.doctor.full_name),t.xp6(2),t.Oqu(i.countDisponibilidad(e))}}function w(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"input",56),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.selectSegment(a))}),t.qZA()}}function I(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",54)(2,"label"),t.YNc(3,w,1,0,"input",55),t._uU(4),t.qZA()(),t.BQk()),2&o){const e=n.$implicit;t.xp6(3),t.Q6J("ngIf",!e.is_appointment),t.xp6(1),t.AsE(" ",e.format_segment.format_hour_start," a ",e.format_segment.format_hour_end," ")}}function L(o,n){if(1&o&&(t.TgZ(0,"div",53)(1,"div",26)(2,"table",27)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"HORA"),t.qZA()()(),t.TgZ(7,"tbody")(8,"tr")(9,"td"),t.YNc(10,I,5,3,"ng-container",28),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.DOCTOR_SELECTED.segments)}}function F(o,n){if(1&o&&(t.TgZ(0,"div",57)(1,"div",58)(2,"div",59)(3,"strong"),t._uU(4,"\xc9xito!"),t.qZA(),t._uU(5),t.TgZ(6,"button",60),t._UZ(7,"span",61),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.text_success,". ")}}function Q(o,n){if(1&o&&(t.TgZ(0,"div",57)(1,"div",58)(2,"div",62)(3,"strong"),t._uU(4,"\xa1Atenci\xf3n!"),t.qZA(),t._uU(5),t.TgZ(6,"button",60),t._UZ(7,"span",61),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.text_validation,". ")}}const U=function(){return{standalone:!0}};class A{constructor(n){this.appointmentService=n,this.hours=[],this.specialities=[],this.name="",this.surname="",this.mobile="",this.n_document=0,this.name_companion="",this.surname_companion="",this.amount=0,this.amount_add=0,this.method_payment="",this.DOCTORS=[],this.text_success="",this.text_validation=""}ngOnInit(){this.appointmentService.listConfig().subscribe(n=>{this.hours=n.hours,this.specialities=n.specialities})}save(){this.text_validation="",this.amount<this.amount_add?this.text_validation="EL MONTO INGRESADO COMO ADELANTO NO PUEDE SER MAYOR AL COSTO DE LA CITA MEDICA":this.name&&this.surname&&this.mobile&&this.n_document&&this.name_companion&&this.surname_companion&&this.date_appointment&&this.specialitie_id&&this.selected_segment_hour&&this.amount&&this.amount_add&&this.method_payment?this.appointmentService.registerAppointment({doctor_id:this.DOCTOR_SELECTED.doctor.id,name:this.name,surname:this.surname,mobile:this.mobile,n_document:this.n_document,name_companion:this.name_companion,surname_companion:this.surname_companion,date_appointment:this.date_appointment,specialitie_id:this.specialitie_id,doctor_schedule_join_hour_id:this.selected_segment_hour.id,amount:this.amount,amount_add:this.amount_add,method_payment:this.method_payment}).subscribe(e=>{console.log(e),this.text_success="LA CITA MEDICA SE REGISTRO CON EXITO"}):this.text_validation="LOS CAMPOS SON NECESARIOS (SEGMENTO DE HORA, LA FECHA , LA ESPECIALIDAD, PACIENTE Y PAGOS)"}filtro(){this.appointmentService.listFilter({date_appointment:this.date_appointment,hour:this.hour,specialitie_id:this.specialitie_id}).subscribe(e=>{console.log(e),this.DOCTORS=e.doctors})}countDisponibilidad(n){let e=[];return e=n.segments.filter(i=>!i.is_appointment),e.length}showSegment(n){this.DOCTOR_SELECTED=n}selectSegment(n){this.selected_segment_hour=n}filterPatient(){this.appointmentService.listPatient(this.n_document+"").subscribe(n=>{console.log(n),403==n.message?(this.name="",this.surname="",this.mobile="",this.n_document=0):(this.name=n.name,this.surname=n.surname,this.mobile=n.mobile,this.n_document=n.n_document)})}resetPatient(){this.name="",this.surname="",this.mobile="",this.n_document=0}static#t=this.\u0275fac=function(e){return new(e||A)(t.Y36(_))};static#e=this.\u0275cmp=t.Xpm({type:A,selectors:[["app-add-appointments"]],decls:157,vars:26,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-12"],[1,"form-heading"],[1,"col-12","col-md-6","col-xl-3"],[1,"form-group","local-forms"],[1,"login-danger"],["name","birth_date","type","text","matInput","",1,"form-control","datetimepicker",3,"ngModel","matDatepicker","ngModelChange"],["picker",""],["matIconSuffix","",3,"for"],["placeholder","Seleccionar Hora",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Seleccionar Especialidad",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"col-8"],[1,"table-responsive"],[1,"table","mb-0"],[4,"ngFor","ngForOf"],["class","col-4",4,"ngIf"],["class","form-group row my-4",4,"ngIf"],[1,"row","align-items-center","py-4"],[1,"col-12","py-4"],[1,"btn","btn-sm","btn-dark",3,"click"],[1,"col-12","col-md-6","col-xl-4"],["name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","surname","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","mobile","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","n_document","type","number",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],[1,"col-12","col-sm-3"],["type","text","name","name_companion",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","surname_companion",1,"form-control",3,"ngModel","ngModelChange"],["name","amount","type","number",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Seleccionar M\xe9todo",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],["value","EFECTIVO"],["value","TRANSFERENCIA"],["value","YAPE"],["value","PLIN"],["name","amount_add","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"doctor-submit","text-end"],["type","button",1,"btn","btn-primary","submit-form","me-2",3,"click"],[3,"value"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"col-4"],[1,"radio"],["type","radio","name","radio",3,"click",4,"ngIf"],["type","radio","name","radio",3,"click"],[1,"form-group","row","my-4"],[1,"col-md-8"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8,"Cita"),t.qZA()(),t.TgZ(9,"li",6),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"li",9),t._uU(12,"Agregar Cita"),t.qZA()()()()(),t.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"form")(18,"div",12)(19,"div",13)(20,"div",14)(21,"h4"),t._uU(22,"Agregar Cita"),t.qZA()()(),t.TgZ(23,"div",15)(24,"div",16)(25,"label"),t._uU(26,"Fecha de la Cita "),t.TgZ(27,"span",17),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"input",18),t.NdJ("ngModelChange",function(s){return i.date_appointment=s}),t.qZA(),t._UZ(30,"mat-datepicker",null,19)(32,"mat-datepicker-toggle",20),t.qZA()(),t.TgZ(33,"div",15)(34,"div",16)(35,"label"),t._uU(36,"Hora "),t.TgZ(37,"span",17),t._uU(38,"*"),t.qZA()(),t.TgZ(39,"mat-select",21),t.NdJ("ngModelChange",function(s){return i.hour=s}),t.YNc(40,y,2,2,"mat-option",22),t.qZA()()(),t.TgZ(41,"div",15)(42,"div",16)(43,"label"),t._uU(44,"Especialidades "),t.TgZ(45,"span",17),t._uU(46,"*"),t.qZA()(),t.TgZ(47,"mat-select",23),t.NdJ("ngModelChange",function(s){return i.specialitie_id=s}),t.YNc(48,k,2,2,"mat-option",22),t.qZA()()(),t.TgZ(49,"div",15)(50,"div",16)(51,"button",24),t.NdJ("click",function(){return i.filtro()}),t._uU(52,"Filtrar"),t.qZA()()()(),t.TgZ(53,"div",12)(54,"div",25)(55,"div",26)(56,"table",27)(57,"thead")(58,"tr")(59,"th"),t._uU(60,"M\xc9DICO"),t.qZA(),t.TgZ(61,"th"),t._uU(62,"DISPONIBILIDAD"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"VER"),t.qZA()()(),t.TgZ(65,"tbody"),t.YNc(66,D,9,2,"ng-container",28),t.qZA()()()(),t.YNc(67,L,11,1,"div",29),t.TgZ(68,"div",13),t.YNc(69,F,8,1,"div",30),t.YNc(70,Q,8,1,"div",30),t.qZA()(),t.TgZ(71,"div",31)(72,"div",32)(73,"h4"),t._uU(74,"Datos del paciente: "),t.qZA(),t.TgZ(75,"button",33),t.NdJ("click",function(){return i.resetPatient()}),t._uU(76,"Limpiar"),t.qZA()(),t.TgZ(77,"div",34)(78,"div",16)(79,"label"),t._uU(80,"Nombre "),t.TgZ(81,"span",17),t._uU(82,"*"),t.qZA()(),t.TgZ(83,"input",35),t.NdJ("ngModelChange",function(s){return i.name=s}),t.qZA()()(),t.TgZ(84,"div",34)(85,"div",16)(86,"label"),t._uU(87,"Apellido "),t.TgZ(88,"span",17),t._uU(89,"*"),t.qZA()(),t.TgZ(90,"input",36),t.NdJ("ngModelChange",function(s){return i.surname=s}),t.qZA()()(),t.TgZ(91,"div",34)(92,"div",16)(93,"label"),t._uU(94,"Tel\xe9fono "),t.TgZ(95,"span",17),t._uU(96,"*"),t.qZA()(),t.TgZ(97,"input",37),t.NdJ("ngModelChange",function(s){return i.mobile=s}),t.qZA()()(),t.TgZ(98,"div",34)(99,"div",16)(100,"label"),t._uU(101,"N\xb0 Documento "),t.TgZ(102,"span",17),t._uU(103,"*"),t.qZA()(),t.TgZ(104,"input",38),t.NdJ("keyup.enter",function(){return i.filterPatient()})("ngModelChange",function(s){return i.n_document=s}),t.qZA()()(),t.TgZ(105,"div",39)(106,"div",16)(107,"label"),t._uU(108,"Nombre del Acompa\xf1ante "),t.TgZ(109,"span",17),t._uU(110,"*"),t.qZA()(),t.TgZ(111,"input",40),t.NdJ("ngModelChange",function(s){return i.name_companion=s}),t.qZA()()(),t.TgZ(112,"div",39)(113,"div",16)(114,"label"),t._uU(115,"Apellido del Acompa\xf1ante "),t.TgZ(116,"span",17),t._uU(117,"*"),t.qZA()(),t.TgZ(118,"input",41),t.NdJ("ngModelChange",function(s){return i.surname_companion=s}),t.qZA()()()(),t.TgZ(119,"div",31)(120,"div",32)(121,"h4"),t._uU(122,"Pago: "),t.qZA()(),t.TgZ(123,"div",34)(124,"div",16)(125,"label"),t._uU(126,"Monto del Pago "),t.TgZ(127,"span",17),t._uU(128,"*"),t.qZA()(),t.TgZ(129,"input",42),t.NdJ("ngModelChange",function(s){return i.amount=s}),t.qZA()()(),t.TgZ(130,"div",34)(131,"div",16)(132,"label"),t._uU(133,"M\xe9todo de Pago "),t.TgZ(134,"span",17),t._uU(135,"*"),t.qZA()(),t.TgZ(136,"mat-select",43),t.NdJ("ngModelChange",function(s){return i.method_payment=s}),t.TgZ(137,"mat-option",44),t._uU(138," EFECTIVO "),t.qZA(),t.TgZ(139,"mat-option",45),t._uU(140," TRANSFERENCIA "),t.qZA(),t.TgZ(141,"mat-option",46),t._uU(142," YAPE "),t.qZA(),t.TgZ(143,"mat-option",47),t._uU(144," PLIN "),t.qZA()()()(),t.TgZ(145,"div",34)(146,"div",16)(147,"label"),t._uU(148,"Monto de Adelanto "),t.TgZ(149,"span",17),t._uU(150,"*"),t.qZA()(),t.TgZ(151,"input",48),t.NdJ("ngModelChange",function(s){return i.amount_add=s}),t.qZA()()()(),t.TgZ(152,"div",12)(153,"div",13)(154,"div",49)(155,"button",50),t.NdJ("click",function(){return i.save()}),t._uU(156,"Guardar"),t.qZA()()()()()()()()()()()),2&e){const a=t.MAs(31);t.xp6(29),t.Q6J("ngModel",i.date_appointment)("matDatepicker",a),t.xp6(3),t.Q6J("for",a),t.xp6(7),t.Q6J("ngModel",i.hour)("ngModelOptions",t.DdM(23,U)),t.xp6(1),t.Q6J("ngForOf",i.hours),t.xp6(7),t.Q6J("ngModel",i.specialitie_id)("ngModelOptions",t.DdM(24,U)),t.xp6(1),t.Q6J("ngForOf",i.specialities),t.xp6(18),t.Q6J("ngForOf",i.DOCTORS),t.xp6(1),t.Q6J("ngIf",i.DOCTOR_SELECTED),t.xp6(2),t.Q6J("ngIf",i.text_success),t.xp6(1),t.Q6J("ngIf",i.text_validation),t.xp6(13),t.Q6J("ngModel",i.name),t.xp6(7),t.Q6J("ngModel",i.surname),t.xp6(7),t.Q6J("ngModel",i.mobile),t.xp6(7),t.Q6J("ngModel",i.n_document),t.xp6(7),t.Q6J("ngModel",i.name_companion),t.xp6(7),t.Q6J("ngModel",i.surname_companion),t.xp6(11),t.Q6J("ngModel",i.amount),t.xp6(7),t.Q6J("ngModel",i.method_payment)("ngModelOptions",t.DdM(25,U)),t.xp6(15),t.Q6J("ngModel",i.amount_add)}},dependencies:[m.sg,m.O5,g.Mq,g.hl,g.nW,x.R9,C.gD,M.ey,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.On,l.F]})}var E=p(7155),N=p(6308);function P(o,n){if(1&o&&(t.TgZ(0,"mat-option",59),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}const R=function(){return{standalone:!0}};function Y(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",22)(1,"label"),t._uU(2,"Specialities "),t.TgZ(3,"span",23),t._uU(4,"*"),t.qZA()(),t.TgZ(5,"mat-select",57),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.specialitie_id=a)}),t.YNc(6,P,2,2,"mat-option",58),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.specialitie_id)("ngModelOptions",t.DdM(3,R)),t.xp6(1),t.Q6J("ngForOf",e.specialities)}}const j=function(o){return["/appointment-m/list/edit/",o]};function G(o,n){if(1&o&&(t.TgZ(0,"a",78),t._UZ(1,"i",79),t._uU(2," Edit"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,j,e.id))}}function z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",80),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.selectUser(a))}),t._UZ(1,"i",81),t._uU(2," Delete"),t.qZA()}if(2&o){const e=t.oxw(2).$implicit;t.uIk("data-bs-target","#delete_staff-"+e.id)}}const B=function(o){return["/appointment-m/list/atencion-medica/",o]};function H(o,n){if(1&o&&(t.TgZ(0,"a",78),t._UZ(1,"img",82),t._uU(2," Atenci\xf3n"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,B,e.id))}}function V(o,n){if(1&o&&(t.TgZ(0,"div",72)(1,"a",73),t._UZ(2,"i",74),t.qZA(),t.TgZ(3,"div",75),t.YNc(4,G,3,3,"a",76),t.YNc(5,z,3,1,"a",77),t.YNc(6,H,3,3,"a",76),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngIf",e.isPermision("edit_appointment")),t.xp6(1),t.Q6J("ngIf",e.isPermision("delete_appointment")),t.xp6(1),t.Q6J("ngIf",e.isPermision("attention_appointment"))}}function K(o,n){if(1&o&&(t.TgZ(0,"h3"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("Are you sure want to delete this appointment ",e.appointment_selected.id,"?")}}const W=function(o,n){return{"status-pink":o,"status-green":n}};function X(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"button",60),t._uU(13),t.qZA()(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td",61),t.YNc(17,V,7,3,"div",62),t.qZA(),t.TgZ(18,"div",63)(19,"div",64)(20,"div",65)(21,"div",66),t._UZ(22,"img",67),t.YNc(23,K,2,1,"h3",68),t.TgZ(24,"div",69)(25,"a",70),t._uU(26,"Close"),t.qZA(),t.TgZ(27,"button",71),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.deleteAppointment())}),t._uU(28,"Delete"),t.qZA()()()()()()()}if(2&o){const e=n.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.doctor.full_name),t.xp6(2),t.Oqu(e.patient.full_name),t.xp6(2),t.Oqu(e.date_appointment_format),t.xp6(2),t.Oqu(e.segment_hour.format_segment.format_hour_start+" - "+e.segment_hour.format_segment.format_hour_end),t.xp6(2),t.Oqu(e.specialitie.name),t.xp6(2),t.Q6J("ngClass",t.WLB(11,W,1===e.status,2===e.status)),t.xp6(1),t.Oqu(1==e.status?"PENDIENTE":"ATENDIDO"),t.xp6(2),t.Oqu(e.created_at),t.xp6(2),t.Q6J("ngIf",1!=e.id),t.xp6(1),t.uIk("id","delete_staff-"+e.id),t.xp6(5),t.Q6J("ngIf",i.appointment_selected)}}function tt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li",84),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.moveToPage(a.currentPage-2))}),t.TgZ(1,"a",85),t._uU(2," ... "),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("hidden",1===e.currentPage)}}function et(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li",84),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.moveToPage(a.currentPage+2))}),t.TgZ(1,"a",85),t._uU(2," ... "),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("hidden",e.currentPage>=e.pageNumberArray[e.pageNumberArray.length-2]||e.totalData<e.serialNumberArray[e.serialNumberArray.length-1])}}function nt(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"li",54)(2,"a",56),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.moveToPage(s))}),t._uU(3),t.qZA()(),t.YNc(4,tt,3,1,"li",83),t.YNc(5,et,3,1,"li",83),t.BQk()}if(2&o){const e=n.$implicit,i=n.index,a=t.oxw();t.xp6(1),t.ekj("active",e===a.currentPage),t.Q6J("ngClass",a.pageNumberArray[a.currentPage-2]>e&&1!==e&&a.pageNumberArray.length>6||a.pageNumberArray[a.currentPage]<e&&1!==e&&a.pageNumberArray.length>6&&a.pageNumberArray.length!==e?"hide-page-no":"show-page-no"),t.xp6(2),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",0===i&&a.pageNumberArray.length>6&&a.currentPage>2),t.xp6(1),t.Q6J("ngIf",i===a.pageNumberArray.length-2&&a.pageNumberArray.length>6)}}const O=function(o){return{disabled:o}};class Z{constructor(n){this.appointmentService=n,this.appointmentList=[],this.showFilter=!1,this.searchDataValue="",this.specialitie_id="",this.date=null,this.lastIndex=0,this.pageSize=20,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.patient_generals=[],this.specialities=[]}ngOnInit(){this.getTableData(),this.appointmentService.listConfig().subscribe(n=>{this.specialities=n.specialities}),this.user=this.appointmentService.authService.user}isPermited(){let n=!1;return this.user.roles.forEach(e=>{-1!=e.toUpperCase().indexOf("DOCTOR")&&(n=!0)}),n}isPermision(n){return!(!this.user.roles.includes("Super-Admin")&&!this.user.permissions.includes(n))}getTableData(n=1){this.appointmentList=[],this.serialNumberArray=[],this.appointmentService.listAppointments(n,this.searchDataValue,this.specialitie_id,this.date).subscribe(e=>{console.log(e),this.totalData=e.total,this.appointmentList=e.appointments.data,this.dataSource=new E.by(this.appointmentList),this.calculateTotalPages(this.totalData,this.pageSize)})}getTableDataGeneral(){this.appointmentList=[],this.serialNumberArray=[],this.patient_generals.map((n,e)=>{const i=e+1;e>=this.skip&&i<=this.limit&&(this.appointmentList.push(n),this.serialNumberArray.push(i))}),this.dataSource=new E.by(this.appointmentList),this.calculateTotalPages(this.totalData,this.pageSize)}selectUser(n){this.appointment_selected=n}deleteAppointment(){this.appointmentService.deleteAppointment(this.appointment_selected.id).subscribe(n=>{console.log(n);let e=this.appointmentList.findIndex(i=>i.id==this.appointment_selected.id);-1!=e&&(this.appointmentList.splice(e,1),$("#delete_patient").hide(),$("#delete_patient").removeClass("show"),$(".modal-backdrop").remove(),$("body").removeClass(),$("body").removeAttr("style"),this.appointment_selected=null)})}searchData(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.getTableData()}sortData(n){const e=this.appointmentList.slice();this.appointmentList=n.active&&""!==n.direction?e.sort((i,a)=>(i[n.active]<a[n.active]?-1:1)*("asc"===n.direction?1:-1)):e}getMoreData(n){"next"==n?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage)):"previous"==n&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage))}moveToPage(n){this.currentPage=n,this.skip=this.pageSelection[n-1].skip,this.limit=this.pageSelection[n-1].limit,n>this.currentPage?this.pageIndex=n-1:n<this.currentPage&&(this.pageIndex=n+1),this.getTableData(this.currentPage)}PageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.searchDataValue="",this.specialitie_id="",this.date=null,this.getTableData()}calculateTotalPages(n,e){this.pageNumberArray=[],this.totalPages=n/e,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var i=1;i<=this.totalPages;i++){const a=e*i,s=a-e;this.pageNumberArray.push(i),this.pageSelection.push({skip:s,limit:a})}}static#t=this.\u0275fac=function(e){return new(e||Z)(t.Y36(_))};static#e=this.\u0275cmp=t.Xpm({type:Z,selectors:[["app-list-appointments"]],decls:89,vars:14,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],["class","form-group local-forms",4,"ngIf"],[1,"form-group","local-forms"],[1,"login-danger"],["name","date","type","date",1,"form-control","datetimepicker",3,"ngModel","ngModelChange"],[1,"add-group"],["href","#","onclick","return false;",1,"btn","btn-dark","add-pluss","ms-2",3,"click"],["routerLink","/appointment-m/register",1,"btn","btn-primary","add-pluss","ms-2"],["src","assets/img/icons/plus.svg","alt",""],["href","javascript:;",1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],[1,"col-auto","text-end","float-end","ms-auto","download-grp"],["href","javascript:;",1,"me-2"],["src","assets/img/icons/pdf-icon-01.svg","alt",""],["src","assets/img/icons/pdf-icon-02.svg","alt",""],["src","assets/img/icons/pdf-icon-03.svg","alt",""],["href","javascript:;"],["src","assets/img/icons/pdf-icon-04.svg","alt",""],[1,"table-responsive"],["matSort","",1,"table","border-0","custom-table","comman-table","datatable","mb-0",3,"matSortChange"],["mat-sort-header","name"],["mat-sort-header","email"],["mat-sort-header","mobile"],["mat-sort-header","birth_date"],["mat-sort-header","n_document"],["mat-sort-header","status"],["mat-sort-header","created_at"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],["placeholder","Select  Speciality",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"custom-badge",3,"ngClass"],[1,"text-end"],["class","dropdown dropdown-action",4,"ngIf"],["role","dialog",1,"modal","fade","delete-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center"],["src","assets/img/sent.png","alt","","width","50","height","46"],[4,"ngIf"],[1,"m-t-20"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1"],["type","submit",1,"btn","btn-danger",3,"click"],[1,"dropdown","dropdown-action"],["href","javascript:void(0);","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item",3,"routerLink",4,"ngIf"],["class","dropdown-item","href","javascript:void(0);","data-bs-toggle","modal",3,"click",4,"ngIf"],[1,"dropdown-item",3,"routerLink"],[1,"fa-solid","fa-pen-to-square","m-r-5"],["href","javascript:void(0);","data-bs-toggle","modal",1,"dropdown-item",3,"click"],[1,"fa","fa-trash-alt","m-r-5"],["src","assets/img/icons/doctor-dash-01.svg","alt","",2,"background","#000"],["class","page-item",3,"hidden","click",4,"ngIf"],[1,"page-item",3,"hidden","click"],["href","javascript:void(0);",1,"page-link"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8,"Appointments "),t.qZA()(),t.TgZ(9,"li",6),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"li",9),t._uU(12,"Appointment List"),t.qZA()()()()(),t.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"h3"),t._uU(22,"Appointment List"),t.qZA(),t.TgZ(23,"div",16)(24,"div",17)(25,"input",18),t.NdJ("ngModelChange",function(s){return i.searchDataValue=s})("keyup.enter",function(){return i.searchData()}),t.qZA(),t.TgZ(26,"a",19),t._UZ(27,"img",20),t.qZA()()()()(),t.TgZ(28,"div",14),t.YNc(29,Y,7,4,"div",21),t.qZA(),t.TgZ(30,"div",14)(31,"div",22)(32,"label"),t._uU(33,"Fecha "),t.TgZ(34,"span",23),t._uU(35,"*"),t.qZA()(),t.TgZ(36,"input",24),t.NdJ("ngModelChange",function(s){return i.date=s}),t.qZA()()(),t.TgZ(37,"div",14)(38,"div",25)(39,"a",26),t.NdJ("click",function(){return i.searchData()}),t._uU(40,"Filtro"),t.qZA(),t.TgZ(41,"a",27),t._UZ(42,"img",28),t.qZA(),t.TgZ(43,"a",29),t.NdJ("click",function(){return i.PageSize()}),t._UZ(44,"img",30),t.qZA()()(),t.TgZ(45,"div",31)(46,"a",32),t._UZ(47,"img",33),t.qZA(),t.TgZ(48,"a",32),t._UZ(49,"img",34),t.qZA(),t.TgZ(50,"a",32),t._UZ(51,"img",35),t.qZA(),t.TgZ(52,"a",36),t._UZ(53,"img",37),t.qZA()()()(),t.TgZ(54,"div",38)(55,"table",39),t.NdJ("matSortChange",function(s){return i.sortData(s)}),t.TgZ(56,"thead")(57,"tr")(58,"th",40),t._uU(59,"Doctor"),t.qZA(),t.TgZ(60,"th",41),t._uU(61,"Paciente"),t.qZA(),t.TgZ(62,"th",42),t._uU(63,"Fecha"),t.qZA(),t.TgZ(64,"th",43),t._uU(65,"Hora"),t.qZA(),t.TgZ(66,"th",44),t._uU(67,"Especialidad"),t.qZA(),t.TgZ(68,"th",45),t._uU(69,"Status"),t.qZA(),t.TgZ(70,"th",46),t._uU(71,"Fecha de registro"),t.qZA(),t._UZ(72,"th"),t.qZA()(),t.TgZ(73,"tbody"),t.YNc(74,X,29,14,"tr",47),t.qZA()(),t.TgZ(75,"div",48)(76,"div",49)(77,"div",50),t._uU(78),t.qZA()(),t.TgZ(79,"div",51)(80,"div",52)(81,"ul",53)(82,"li",54)(83,"a",55),t.NdJ("click",function(){return i.getMoreData("previous")}),t._uU(84,"Previous"),t.qZA()(),t.YNc(85,nt,6,6,"ng-container",47),t.TgZ(86,"li",54)(87,"a",56),t.NdJ("click",function(){return i.getMoreData("next")}),t._uU(88,"Next "),t.qZA()()()()()()()()()()()()()),2&e&&(t.xp6(25),t.Q6J("ngModel",i.searchDataValue),t.xp6(4),t.Q6J("ngIf",!i.isPermited()),t.xp6(7),t.Q6J("ngModel",i.date),t.xp6(38),t.Q6J("ngForOf",i.appointmentList),t.xp6(4),t.lnq(" Showing ",i.serialNumberArray[0]," to ",i.serialNumberArray[i.serialNumberArray.length-1]," of ",i.totalData," entries "),t.xp6(4),t.Q6J("ngClass",t.VKq(10,O,1===i.currentPage)),t.xp6(3),t.Q6J("ngForOf",i.pageNumberArray),t.xp6(1),t.Q6J("ngClass",t.VKq(12,O,i.currentPage===i.pageNumberArray[i.pageNumberArray.length-1]||0===i.appointmentList.length)))},dependencies:[m.mk,m.sg,m.O5,u.rH,C.gD,M.ey,N.YE,N.nU,l.Fj,l.JJ,l.On]})}function it(o,n){if(1&o&&(t.TgZ(0,"mat-option",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ot(o,n){if(1&o&&(t.TgZ(0,"mat-option",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function at(o,n){if(1&o&&(t.TgZ(0,"div",26)(1,"div",27)(2,"table",28)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"DOCTOR"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"HORARIO PACTADA"),t.qZA()()(),t.TgZ(9,"tbody")(10,"tr",47)(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(12),t.Oqu(e.appointment_selected.doctor.full_name),t.xp6(2),t.AsE("",e.appointment_selected.segment_hour.format_segment.format_hour_start," a ",e.appointment_selected.segment_hour.format_segment.format_hour_end,"")}}function st(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td")(7,"button",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.showSegment(s))}),t._uU(8,"+"),t.qZA()()(),t.BQk()}if(2&o){const e=n.$implicit,i=t.oxw();t.xp6(3),t.Oqu(e.doctor.full_name),t.xp6(2),t.Oqu(i.countDisponibilidad(e))}}function lt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"input",52),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.selectSegment(a))}),t.qZA()}}function pt(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",50)(2,"label"),t.YNc(3,lt,1,0,"input",51),t._uU(4),t.qZA()(),t.BQk()),2&o){const e=n.$implicit;t.xp6(3),t.Q6J("ngIf",!e.is_appointment),t.xp6(1),t.AsE(" ",e.format_segment.format_hour_start," a ",e.format_segment.format_hour_end," ")}}function rt(o,n){if(1&o&&(t.TgZ(0,"div",49)(1,"div",27)(2,"table",28)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"HORA"),t.qZA()()(),t.TgZ(7,"tbody")(8,"tr")(9,"td"),t.YNc(10,pt,5,3,"ng-container",29),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.DOCTOR_SELECTED.segments)}}function dt(o,n){if(1&o&&(t.TgZ(0,"div",53)(1,"div",54)(2,"div",55)(3,"strong"),t._uU(4,"Exito!"),t.qZA(),t._uU(5),t.TgZ(6,"button",56),t._UZ(7,"span",57),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.text_success,". ")}}function mt(o,n){if(1&o&&(t.TgZ(0,"div",53)(1,"div",54)(2,"div",58)(3,"strong"),t._uU(4,"!"),t.qZA(),t._uU(5),t.TgZ(6,"button",56),t._UZ(7,"span",57),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.text_validation,". ")}}const J=function(){return{standalone:!0}};class f{constructor(n,e){this.appointmentService=n,this.activedRoute=e,this.hours=[],this.specialities=[],this.name="",this.surname="",this.mobile="",this.n_document=0,this.name_companion="",this.surname_companion="",this.amount=0,this.amount_add=0,this.method_payment="",this.DOCTORS=[],this.text_success="",this.text_validation=""}ngOnInit(){this.activedRoute.params.subscribe(n=>{console.log(n),this.appointment_id=n.id}),this.appointmentService.listConfig().subscribe(n=>{this.hours=n.hours,this.specialities=n.specialities,this.appointmentService.showAppointment(this.appointment_id).subscribe(e=>{console.log(e),this.appointment_selected=e.appointment,this.name=this.appointment_selected.patient.name,this.surname=this.appointment_selected.patient.surname,this.mobile=this.appointment_selected.patient.mobile,this.n_document=this.appointment_selected.patient.n_document,this.name_companion=this.appointment_selected.patient.name_companion,this.surname_companion=this.appointment_selected.patient.surname_companion,this.date_appointment=new Date(this.appointment_selected.date_appointment).toISOString(),this.specialitie_id=this.appointment_selected.specialitie_id,this.amount=this.appointment_selected.amount,this.hour=this.appointment_selected.segment_hour.format_segment.hour})})}save(){this.text_validation="",this.date_appointment&&this.specialitie_id&&this.amount?new Date(this.date_appointment).getTime()==new Date(this.appointment_selected.date_appointment).getTime()||this.selected_segment_hour?this.appointmentService.updateAppointment(this.appointment_id,{doctor_id:this.DOCTOR_SELECTED.doctor.id,date_appointment:this.date_appointment,specialitie_id:this.specialitie_id,doctor_schedule_join_hour_id:this.selected_segment_hour?this.selected_segment_hour.id:this.appointment_selected.doctor_schedule_join_hour_id,amount:this.amount}).subscribe(e=>{console.log(e),403==e.message?this.text_validation=e.message_text:this.text_success="LA CITA MEDICA SE EDITO CON EXITO"}):this.text_validation="NECESITAS SELECCIONAR UN SEGMENTO":this.text_validation="LOS CAMPOS SON NECESARIOS (LA FECHA , LA ESPECIALIDAD Y EL TOTAL DE PAGOS)"}onDateChange(n){this.DOCTORS=[],this.selected_segment_hour=null,this.DOCTOR_SELECTED=null}filtro(){this.appointmentService.listFilter({date_appointment:this.date_appointment,hour:this.hour,specialitie_id:this.specialitie_id}).subscribe(e=>{console.log(e),this.DOCTORS=e.doctors})}isDoctorSelected(n){return n.doctor.id==this.appointment_selected.doctor_id}isSegmentSelected(n){return n.id==this.appointment_selected.doctor_schedule_join_hour_id}countDisponibilidad(n){let e=[];return e=n.segments.filter(i=>!i.is_appointment),e.length}showSegment(n){this.DOCTOR_SELECTED=n}selectSegment(n){this.selected_segment_hour=n}filterPatient(){this.appointmentService.listPatient(this.n_document+"").subscribe(n=>{console.log(n),403==n.message?(this.name="",this.surname="",this.mobile="",this.n_document=0):(this.name=n.name,this.surname=n.surname,this.mobile=n.mobile,this.n_document=n.n_document)})}resetPatient(){this.name="",this.surname="",this.mobile="",this.n_document=0}static#t=this.\u0275fac=function(e){return new(e||f)(t.Y36(_),t.Y36(u.gz))};static#e=this.\u0275cmp=t.Xpm({type:f,selectors:[["app-edit-appointments"]],decls:136,vars:25,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-12"],[1,"form-heading"],[1,"col-12","col-md-6","col-xl-3"],[1,"form-group","local-forms"],[1,"login-danger"],["name","birth_date","type","text","matInput","",1,"form-control","datetimepicker",3,"ngModel","matDatepicker","dateChange","ngModelChange"],["picker",""],["matIconSuffix","",3,"for"],["placeholder","Select  Hour",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select  Speciality",1,"form-control","select",3,"ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-sm","btn-primary",3,"click"],["class","col-8",4,"ngIf"],[1,"col-8"],[1,"table-responsive"],[1,"table","mb-0"],[4,"ngFor","ngForOf"],["class","col-4",4,"ngIf"],["class","form-group row my-4",4,"ngIf"],[1,"row","align-items-center","py-4"],[1,"col-12","py-4"],[1,"btn","btn-sm","btn-dark",3,"click"],[1,"col-12","col-md-6","col-xl-4"],["disabled","","name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["disabled","","name","surname","type","text",1,"form-control",3,"ngModel","ngModelChange"],["disabled","","name","mobile","type","text",1,"form-control",3,"ngModel","ngModelChange"],["disabled","","name","n_document","type","number",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],[1,"col-12","col-sm-3"],["disabled","","type","text","name","name_companion",1,"form-control",3,"ngModel","ngModelChange"],["type","text","disabled","","name","surname_companion",1,"form-control",3,"ngModel","ngModelChange"],["name","amount","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"doctor-submit","text-end"],["type","button",1,"btn","btn-primary","submit-form","me-2",3,"click"],[3,"value"],[1,"bg-danger"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"col-4"],[1,"radio"],["type","radio","name","radio",3,"click",4,"ngIf"],["type","radio","name","radio",3,"click"],[1,"form-group","row","my-4"],[1,"col-md-8"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8,"Appointment "),t.qZA()(),t.TgZ(9,"li",6),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"li",9),t._uU(12),t.qZA()()()()(),t.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"form")(18,"div",12)(19,"div",13)(20,"div",14)(21,"h4"),t._uU(22),t.qZA()()(),t.TgZ(23,"div",15)(24,"div",16)(25,"label"),t._uU(26,"Date Of Appointment "),t.TgZ(27,"span",17),t._uU(28,"*"),t.qZA()(),t.TgZ(29,"input",18),t.NdJ("dateChange",function(s){return i.onDateChange(s)})("ngModelChange",function(s){return i.date_appointment=s}),t.qZA(),t._UZ(30,"mat-datepicker",null,19)(32,"mat-datepicker-toggle",20),t.qZA()(),t.TgZ(33,"div",15)(34,"div",16)(35,"label"),t._uU(36,"Hora "),t.TgZ(37,"span",17),t._uU(38,"*"),t.qZA()(),t.TgZ(39,"mat-select",21),t.NdJ("ngModelChange",function(s){return i.hour=s}),t.YNc(40,it,2,2,"mat-option",22),t.qZA()()(),t.TgZ(41,"div",15)(42,"div",16)(43,"label"),t._uU(44,"Specialities "),t.TgZ(45,"span",17),t._uU(46,"*"),t.qZA()(),t.TgZ(47,"mat-select",23),t.NdJ("ngModelChange",function(s){return i.specialitie_id=s}),t.YNc(48,ot,2,2,"mat-option",22),t.qZA()()(),t.TgZ(49,"div",15)(50,"div",16)(51,"button",24),t.NdJ("click",function(){return i.filtro()}),t._uU(52,"Filtro"),t.qZA()()()(),t.TgZ(53,"div",12),t.YNc(54,at,15,3,"div",25),t.TgZ(55,"div",26)(56,"div",27)(57,"table",28)(58,"thead")(59,"tr")(60,"th"),t._uU(61,"DOCTOR"),t.qZA(),t.TgZ(62,"th"),t._uU(63,"DISPONIBILIDAD"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"VER"),t.qZA()()(),t.TgZ(66,"tbody"),t.YNc(67,st,9,2,"ng-container",29),t.qZA()()()(),t.YNc(68,rt,11,1,"div",30),t.TgZ(69,"div",13),t.YNc(70,dt,8,1,"div",31),t.YNc(71,mt,8,1,"div",31),t.qZA()(),t.TgZ(72,"div",32)(73,"div",33)(74,"h4"),t._uU(75,"Datos del paciente: "),t.qZA(),t.TgZ(76,"button",34),t.NdJ("click",function(){return i.resetPatient()}),t._uU(77,"O"),t.qZA()(),t.TgZ(78,"div",35)(79,"div",16)(80,"label"),t._uU(81,"First Name "),t.TgZ(82,"span",17),t._uU(83,"*"),t.qZA()(),t.TgZ(84,"input",36),t.NdJ("ngModelChange",function(s){return i.name=s}),t.qZA()()(),t.TgZ(85,"div",35)(86,"div",16)(87,"label"),t._uU(88,"Surname "),t.TgZ(89,"span",17),t._uU(90,"*"),t.qZA()(),t.TgZ(91,"input",37),t.NdJ("ngModelChange",function(s){return i.surname=s}),t.qZA()()(),t.TgZ(92,"div",35)(93,"div",16)(94,"label"),t._uU(95,"Mobile "),t.TgZ(96,"span",17),t._uU(97,"*"),t.qZA()(),t.TgZ(98,"input",38),t.NdJ("ngModelChange",function(s){return i.mobile=s}),t.qZA()()(),t.TgZ(99,"div",35)(100,"div",16)(101,"label"),t._uU(102,"N\xb0 Documento "),t.TgZ(103,"span",17),t._uU(104,"*"),t.qZA()(),t.TgZ(105,"input",39),t.NdJ("keyup.enter",function(){return i.filterPatient()})("ngModelChange",function(s){return i.n_document=s}),t.qZA()()(),t.TgZ(106,"div",40)(107,"div",16)(108,"label"),t._uU(109,"Nombre del Acompa\xf1ante "),t.TgZ(110,"span",17),t._uU(111,"*"),t.qZA()(),t.TgZ(112,"input",41),t.NdJ("ngModelChange",function(s){return i.name_companion=s}),t.qZA()()(),t.TgZ(113,"div",40)(114,"div",16)(115,"label"),t._uU(116,"Apellido del Acompa\xf1ante "),t.TgZ(117,"span",17),t._uU(118,"*"),t.qZA()(),t.TgZ(119,"input",42),t.NdJ("ngModelChange",function(s){return i.surname_companion=s}),t.qZA()()()(),t.TgZ(120,"div",32)(121,"div",33)(122,"h4"),t._uU(123,"Pago: "),t.qZA()(),t.TgZ(124,"div",35)(125,"div",16)(126,"label"),t._uU(127,"Monto de pago "),t.TgZ(128,"span",17),t._uU(129,"*"),t.qZA()(),t.TgZ(130,"input",43),t.NdJ("ngModelChange",function(s){return i.amount=s}),t.qZA()()()(),t.TgZ(131,"div",12)(132,"div",13)(133,"div",44)(134,"button",45),t.NdJ("click",function(){return i.save()}),t._uU(135,"Editar"),t.qZA()()()()()()()()()()()),2&e){const a=t.MAs(31);t.xp6(12),t.hij("Edit Appointment : #",i.appointment_id,""),t.xp6(10),t.hij("Appointment edit : #",i.appointment_id,""),t.xp6(7),t.Q6J("ngModel",i.date_appointment)("matDatepicker",a),t.xp6(3),t.Q6J("for",a),t.xp6(7),t.Q6J("ngModel",i.hour)("ngModelOptions",t.DdM(23,J)),t.xp6(1),t.Q6J("ngForOf",i.hours),t.xp6(7),t.Q6J("ngModel",i.specialitie_id)("ngModelOptions",t.DdM(24,J)),t.xp6(1),t.Q6J("ngForOf",i.specialities),t.xp6(6),t.Q6J("ngIf",i.appointment_selected),t.xp6(13),t.Q6J("ngForOf",i.DOCTORS),t.xp6(1),t.Q6J("ngIf",i.DOCTOR_SELECTED),t.xp6(2),t.Q6J("ngIf",i.text_success),t.xp6(1),t.Q6J("ngIf",i.text_validation),t.xp6(13),t.Q6J("ngModel",i.name),t.xp6(7),t.Q6J("ngModel",i.surname),t.xp6(7),t.Q6J("ngModel",i.mobile),t.xp6(7),t.Q6J("ngModel",i.n_document),t.xp6(7),t.Q6J("ngModel",i.name_companion),t.xp6(7),t.Q6J("ngModel",i.surname_companion),t.xp6(11),t.Q6J("ngModel",i.amount)}},dependencies:[m.sg,m.O5,g.Mq,g.hl,g.nW,x.R9,C.gD,M.ey,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.On,l.F]})}function ct(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t._UZ(3,"br"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"button",39),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.deleteMedical(s))}),t._uU(7,"X"),t.qZA()()()}if(2&o){const e=n.$implicit;t.xp6(2),t.hij(" MEDICAMENTO: ",e.name_medical," "),t.xp6(2),t.hij(" USO: ",e.uso," ")}}function _t(o,n){if(1&o&&(t.TgZ(0,"div",40)(1,"div",41)(2,"div",42)(3,"strong"),t._uU(4,"Exito!"),t.qZA(),t._uU(5),t.TgZ(6,"button",43),t._UZ(7,"span",44),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.text_success,". ")}}function ut(o,n){if(1&o&&(t.TgZ(0,"div",40)(1,"div",41)(2,"div",45)(3,"strong"),t._uU(4,"!"),t.qZA(),t._uU(5),t.TgZ(6,"button",43),t._UZ(7,"span",44),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.text_validation,". ")}}class T{constructor(n,e){this.appointmentService=n,this.activedRoute=e,this.name="",this.surname="",this.mobile="",this.n_document=0,this.name_companion="",this.surname_companion="",this.text_success="",this.text_validation="",this.medical=[]}ngOnInit(){this.activedRoute.params.subscribe(n=>{console.log(n),this.appointment_id=n.id}),this.appointmentService.showAppointment(this.appointment_id).subscribe(n=>{console.log(n),this.appointment_selected=n.appointment,this.name=this.appointment_selected.patient.name,this.surname=this.appointment_selected.patient.surname,this.mobile=this.appointment_selected.patient.mobile,this.n_document=this.appointment_selected.patient.n_document,this.name_companion=this.appointment_selected.patient.name_companion,this.surname_companion=this.appointment_selected.patient.surname_companion}),this.appointmentService.showAppointmentAttention(this.appointment_id).subscribe(n=>{console.log(n),this.appointment_attention_selected=n.appointment_attention,this.medical=this.appointment_attention_selected.receta_medica,this.description=this.appointment_attention_selected.description})}addMedicamento(){this.medical.push({name_medical:this.name_medical,uso:this.uso}),this.uso="",this.name_medical=""}deleteMedical(n){this.medical.splice(n,1)}save(){this.description&&0!=this.medical.lenght?this.appointmentService.registerAttention({appointment_id:this.appointment_id,patient_id:this.appointment_selected.patient_id,description:this.description,medical:this.medical}).subscribe(e=>{console.log(e),this.text_success="SE GUARDO LA INFORMACI\xd3N DE LA ATENCI\xd3N MEDICA"}):this.text_validation="ES NECESARIO INGRESAR EL DIAGNOSTICO Y UNA RECETA MEDICA"}static#t=this.\u0275fac=function(e){return new(e||T)(t.Y36(_),t.Y36(u.gz))};static#e=this.\u0275cmp=t.Xpm({type:T,selectors:[["app-atencion-medical"]],decls:111,vars:13,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"row","align-items-center","py-4"],[1,"col-12","py-4"],[1,"col-12","col-md-6","col-xl-4"],[1,"form-group","local-forms"],[1,"login-danger"],["disabled","","name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["disabled","","name","surname","type","text",1,"form-control",3,"ngModel","ngModelChange"],["disabled","","name","mobile","type","text",1,"form-control",3,"ngModel","ngModelChange"],["disabled","","name","n_document","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-sm-3"],["disabled","","type","text","name","name_companion",1,"form-control",3,"ngModel","ngModelChange"],["type","text","disabled","","name","surname_companion",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","align-items-center"],[1,"col-12","col-sm-12"],["name","description","rows","4","cols","30",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6"],[1,"col-12","mb-3"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"col-12"],["name","name_medical","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","uso","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive"],[1,"table","mb-0"],[4,"ngFor","ngForOf"],["class","form-group row my-4",4,"ngIf"],[1,"doctor-submit","text-end"],["type","button",1,"btn","btn-primary","submit-form","me-2",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"form-group","row","my-4"],[1,"col-md-8"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8,"Appointment "),t.qZA()(),t.TgZ(9,"li",6),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"li",9),t._uU(12),t.qZA()()()()(),t.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"form")(18,"div",12)(19,"div",13)(20,"h4"),t._uU(21,"Datos del paciente: "),t.qZA()(),t.TgZ(22,"div",14)(23,"div",15)(24,"label"),t._uU(25,"First Name "),t.TgZ(26,"span",16),t._uU(27,"*"),t.qZA()(),t.TgZ(28,"input",17),t.NdJ("ngModelChange",function(s){return i.name=s}),t.qZA()()(),t.TgZ(29,"div",14)(30,"div",15)(31,"label"),t._uU(32,"Surname "),t.TgZ(33,"span",16),t._uU(34,"*"),t.qZA()(),t.TgZ(35,"input",18),t.NdJ("ngModelChange",function(s){return i.surname=s}),t.qZA()()(),t.TgZ(36,"div",14)(37,"div",15)(38,"label"),t._uU(39,"Mobile "),t.TgZ(40,"span",16),t._uU(41,"*"),t.qZA()(),t.TgZ(42,"input",19),t.NdJ("ngModelChange",function(s){return i.mobile=s}),t.qZA()()(),t.TgZ(43,"div",14)(44,"div",15)(45,"label"),t._uU(46,"N\xb0 Documento "),t.TgZ(47,"span",16),t._uU(48,"*"),t.qZA()(),t.TgZ(49,"input",20),t.NdJ("ngModelChange",function(s){return i.n_document=s}),t.qZA()()(),t.TgZ(50,"div",21)(51,"div",15)(52,"label"),t._uU(53,"Nombre del Acompa\xf1ante "),t.TgZ(54,"span",16),t._uU(55,"*"),t.qZA()(),t.TgZ(56,"input",22),t.NdJ("ngModelChange",function(s){return i.name_companion=s}),t.qZA()()(),t.TgZ(57,"div",21)(58,"div",15)(59,"label"),t._uU(60,"Apellido del Acompa\xf1ante "),t.TgZ(61,"span",16),t._uU(62,"*"),t.qZA()(),t.TgZ(63,"input",23),t.NdJ("ngModelChange",function(s){return i.surname_companion=s}),t.qZA()()()(),t.TgZ(64,"div",24)(65,"div",25)(66,"div",15)(67,"label"),t._uU(68,"Diagnostico/Revisi\xf3n "),t.TgZ(69,"span",16),t._uU(70,"*"),t.qZA()(),t.TgZ(71,"textarea",26),t.NdJ("ngModelChange",function(s){return i.description=s}),t.qZA()()()(),t.TgZ(72,"div",24)(73,"div",27)(74,"div",3)(75,"div",28)(76,"button",29),t.NdJ("click",function(){return i.addMedicamento()}),t._uU(77,"+"),t.qZA()(),t.TgZ(78,"div",30)(79,"div",15)(80,"label"),t._uU(81,"Nombre de medicamento "),t.TgZ(82,"span",16),t._uU(83,"*"),t.qZA()(),t.TgZ(84,"input",31),t.NdJ("ngModelChange",function(s){return i.name_medical=s}),t.qZA()()(),t.TgZ(85,"div",30)(86,"div",15)(87,"label"),t._uU(88,"Uso "),t.TgZ(89,"span",16),t._uU(90,"*"),t.qZA()(),t.TgZ(91,"input",32),t.NdJ("ngModelChange",function(s){return i.uso=s}),t.qZA()()()()(),t.TgZ(92,"div",27)(93,"div",33)(94,"table",34)(95,"thead")(96,"tr")(97,"th"),t._uU(98,"Descripci\xf3n"),t.qZA(),t.TgZ(99,"th"),t._uU(100,"Acci\xf3n"),t.qZA()()(),t.TgZ(101,"tbody"),t.YNc(102,ct,8,2,"tr",35),t.qZA()()()()(),t.TgZ(103,"div",24)(104,"div",30),t.YNc(105,_t,8,1,"div",36),t.YNc(106,ut,8,1,"div",36),t.qZA(),t.TgZ(107,"div",30)(108,"div",37)(109,"button",38),t.NdJ("click",function(){return i.save()}),t._uU(110,"Editar"),t.qZA()()()()()()()()()()()),2&e&&(t.xp6(12),t.hij("Edit / Add Atenci\xf3n medica : #",i.appointment_id,""),t.xp6(16),t.Q6J("ngModel",i.name),t.xp6(7),t.Q6J("ngModel",i.surname),t.xp6(7),t.Q6J("ngModel",i.mobile),t.xp6(7),t.Q6J("ngModel",i.n_document),t.xp6(7),t.Q6J("ngModel",i.name_companion),t.xp6(7),t.Q6J("ngModel",i.surname_companion),t.xp6(8),t.Q6J("ngModel",i.description),t.xp6(13),t.Q6J("ngModel",i.name_medical),t.xp6(7),t.Q6J("ngModel",i.uso),t.xp6(11),t.Q6J("ngForOf",i.medical),t.xp6(3),t.Q6J("ngIf",i.text_success),t.xp6(1),t.Q6J("ngIf",i.text_validation))},dependencies:[m.sg,m.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.On,l.F]})}const gt=[{path:"",component:h,children:[{path:"register",component:A},{path:"list",component:Z},{path:"list/edit/:id",component:f},{path:"list/atencion-medica/:id",component:T}]}];class v{static#t=this.\u0275fac=function(e){return new(e||v)};static#e=this.\u0275mod=t.oAB({type:v});static#n=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(gt),u.Bz]})}var ht=p(9079);class b{static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275mod=t.oAB({type:b});static#n=this.\u0275inj=t.cJS({imports:[m.ez,v,ht.m,l.u5,l.UX,d.JF,u.Bz]})}}}]);