"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[8615],{8615:(H,T,l)=>{l.r(T),l.d(T,{RolesModule:()=>b});var c=l(6895),p=l(27),e=l(4650);class g{static#e=this.\u0275fac=function(t){return new(t||g)};static#t=this.\u0275cmp=e.Xpm({type:g,selectors:[["app-roles"]],decls:1,vars:0,template:function(t,s){1&t&&e._UZ(0,"router-outlet")},dependencies:[p.lC]})}var A=l(7945),d=l(529),u=l(5862),U=l(866);class _{constructor(i,t){this.http=i,this.authService=t}listRoles(){let i=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(u.$g+"/roles",{headers:i})}showRoles(i){let t=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.get(u.$g+"/roles/"+i,{headers:t})}storeRoles(i){let t=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.post(u.$g+"/roles",i,{headers:t})}editRoles(i,t){let s=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.put(u.$g+"/roles/"+t,i,{headers:s})}deleteRoles(i){let t=new d.WM({Authorization:"Bearer "+this.authService.token});return this.http.delete(u.$g+"/roles/"+i,{headers:t})}static#e=this.\u0275fac=function(t){return new(t||_)(e.LFG(d.eN),e.LFG(U.e))};static#t=this.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}var a=l(433);function R(n,i){1&n&&(e.TgZ(0,"div",15)(1,"div",26)(2,"div",27)(3,"strong"),e._uU(4,"Error!"),e.qZA(),e._uU(5," ES NECESARIO LLENAR UN NOMBRE Y SELECCIONAR UN PERMISO. "),e.TgZ(6,"button",28),e._UZ(7,"span",29),e.qZA()()()())}function C(n,i){1&n&&(e.TgZ(0,"div",15)(1,"div",26)(2,"div",30)(3,"strong"),e._uU(4,"Exito!"),e.qZA(),e._uU(5," EL ROL SE CREO CORRECTAMENTE. "),e.TgZ(6,"button",28),e._UZ(7,"span",29),e.qZA()()()())}function q(n,i){if(1&n&&(e.TgZ(0,"div",15)(1,"div",26)(2,"div",31)(3,"strong"),e._uU(4,"!"),e.qZA(),e._uU(5),e.TgZ(6,"button",28),e._UZ(7,"span",29),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",t.text_validation,". ")}}function k(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34)(2,"label")(3,"input",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw(3);return e.KtG(m.addPermission(r))}),e.qZA(),e._uU(4),e.qZA()(),e.BQk()}if(2&n){const t=i.$implicit;e.xp6(4),e.hij(" ",t.menuValue," ")}}function N(n,i){if(1&n&&(e.TgZ(0,"div",33),e.YNc(1,k,5,1,"ng-container",25),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subMenus)}}function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",34)(2,"label")(3,"input",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.addPermission(o))}),e.qZA(),e._uU(4),e.qZA()()()}if(2&n){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.menuValue," ")}}function y(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e.YNc(5,N,2,1,"div",32),e.YNc(6,w,5,1,"div",32),e.qZA()(),e.BQk()),2&n){const t=i.$implicit;e.xp6(3),e.Oqu(t.menuValue),e.xp6(2),e.Q6J("ngIf",t.subMenus&&t.subMenus.length>0),e.xp6(1),e.Q6J("ngIf",t.subMenus&&0==t.subMenus.length)}}class h{constructor(i,t){this.DataService=i,this.RoleService=t,this.sideBar=[],this.name="",this.permissions=[],this.valid_form=!1,this.valid_form_success=!1,this.text_validation=null}ngOnInit(){this.sideBar=this.DataService.sideBar[0].menu}addPermission(i){if(i.permision){let t=this.permissions.findIndex(s=>s==i.permision);-1!=t?this.permissions.splice(t,1):this.permissions.push(i.permision),console.log(this.permissions)}}save(){if(this.valid_form=!1,!this.name||0==this.permissions.length)return void(this.valid_form=!0);let i={name:this.name,permisions:this.permissions};this.valid_form_success=!1,this.text_validation=null,this.RoleService.storeRoles(i).subscribe(t=>{if(console.log(t),403==t.message)this.text_validation=t.message_text;else{this.name="",this.permissions=[],this.valid_form_success=!0;let s=this.sideBar;this.sideBar=[],setTimeout(()=>{this.sideBar=s},50)}})}static#e=this.\u0275fac=function(t){return new(t||h)(e.Y36(A.D),e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:h,selectors:[["app-add-role-user"]],decls:46,vars:5,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card-box"],[1,"card-title"],["action","#"],[1,"form-group","row"],[1,"col-form-label","col-md-2"],[1,"col-md-10"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","text-end"],[1,"btn","btn-primary",3,"click"],["class","form-group row",4,"ngIf"],[1,"card-block"],[1,"table-responsive"],[1,"table","table-bordered","mb-0"],[4,"ngFor","ngForOf"],[1,"col-md-8"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["class","",4,"ngIf"],[1,""],[1,"checkbox"],["type","checkbox","name","checkbox",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8,"Roles y Permisos "),e.qZA()(),e.TgZ(9,"li",6),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"li",9),e._uU(12,"Registro"),e.qZA()()()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"h4",13),e._uU(17,"Creaci\xf3n Rol"),e.qZA(),e.TgZ(18,"form",14)(19,"div",15)(20,"label",16),e._uU(21,"Nombre"),e.qZA(),e.TgZ(22,"div",17)(23,"input",18),e.NdJ("ngModelChange",function(r){return s.name=r}),e.qZA()()(),e.TgZ(24,"div",15)(25,"div",19)(26,"button",20),e.NdJ("click",function(){return s.save()}),e._uU(27,"GUARDAR"),e.qZA()()(),e.YNc(28,R,8,0,"div",21),e.YNc(29,C,8,0,"div",21),e.YNc(30,q,8,1,"div",21),e.qZA()()(),e.TgZ(31,"div",11)(32,"div",12)(33,"h4",13),e._uU(34,"Asignaci\xf3n de Permisos"),e.qZA(),e.TgZ(35,"div",22)(36,"div",23)(37,"table",24)(38,"thead")(39,"tr")(40,"th"),e._uU(41,"Secci\xf3n"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Permisos"),e.qZA()()(),e.TgZ(44,"tbody"),e.YNc(45,y,7,3,"ng-container",25),e.qZA()()()()()()()()()),2&t&&(e.xp6(23),e.Q6J("ngModel",s.name),e.xp6(5),e.Q6J("ngIf",s.valid_form),e.xp6(1),e.Q6J("ngIf",s.valid_form_success),e.xp6(1),e.Q6J("ngIf",s.text_validation),e.xp6(15),e.Q6J("ngForOf",s.sideBar))},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}var E=l(7155);const J=function(n){return["/roles/list/edit/",n]};function S(n,i){if(1&n&&(e.TgZ(0,"a",65),e._UZ(1,"i",66),e._uU(2," Edit"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.Q6J("routerLink",e.VKq(1,J,t.id))}}function L(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"a",67),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.selectRole(o))}),e._UZ(1,"i",68),e._uU(2," Delete"),e.qZA()}if(2&n){const t=e.oxw(2).$implicit;e.uIk("data-bs-target","#delete_patient-"+t.id)}}function I(n,i){if(1&n&&(e.TgZ(0,"div",59)(1,"a",60),e._UZ(2,"i",61),e.qZA(),e.TgZ(3,"div",62),e.YNc(4,S,3,3,"a",63),e.YNc(5,L,3,1,"a",64),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.isPermision("edit_rol")),e.xp6(1),e.Q6J("ngIf",t.isPermision("delete_rol"))}}function P(n,i){if(1&n&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("Are you sure want to delete this role ",t.role_selected.name,"?")}}function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",48),e.YNc(8,I,6,2,"div",49),e.qZA(),e.TgZ(9,"div",50)(10,"div",51)(11,"div",52)(12,"div",53),e._UZ(13,"img",54),e.YNc(14,P,2,1,"h3",55),e.TgZ(15,"div",56)(16,"a",57),e._uU(17,"Close"),e.qZA(),e.TgZ(18,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteRol())}),e._uU(19,"Delete"),e.qZA()()()()()()()}if(2&n){const t=i.$implicit,s=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.permision_pluck.length>0?t.permision_pluck:"TODOS LOS PERMISOS"),e.xp6(2),e.Oqu(t.created_at),e.xp6(2),e.Q6J("ngIf",1!=t.id),e.xp6(1),e.uIk("id","delete_patient-"+t.id),e.xp6(5),e.Q6J("ngIf",s.role_selected)}}function F(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",70),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.moveToPage(o.currentPage-2))}),e.TgZ(1,"a",71),e._uU(2," ... "),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("hidden",1===t.currentPage)}}function D(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"li",70),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.moveToPage(o.currentPage+2))}),e.TgZ(1,"a",71),e._uU(2," ... "),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("hidden",t.currentPage>=t.pageNumberArray[t.pageNumberArray.length-2]||t.totalData<t.serialNumberArray[t.serialNumberArray.length-1])}}function O(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",45)(2,"a",47),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.moveToPage(r))}),e._uU(3),e.qZA()(),e.YNc(4,F,3,1,"li",69),e.YNc(5,D,3,1,"li",69),e.BQk()}if(2&n){const t=i.$implicit,s=i.index,o=e.oxw();e.xp6(1),e.ekj("active",t===o.currentPage),e.Q6J("ngClass",o.pageNumberArray[o.currentPage-2]>t&&1!==t&&o.pageNumberArray.length>6||o.pageNumberArray[o.currentPage]<t&&1!==t&&o.pageNumberArray.length>6&&o.pageNumberArray.length!==t?"hide-page-no":"show-page-no"),e.xp6(2),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",0===s&&o.pageNumberArray.length>6&&o.currentPage>2),e.xp6(1),e.Q6J("ngIf",s===o.pageNumberArray.length-2&&o.pageNumberArray.length>6)}}const x=function(n){return{disabled:n}};class v{constructor(i){this.RoleService=i,this.rolesList=[],this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.role_generals=[]}ngOnInit(){this.user=this.RoleService.authService.user,this.getTableData()}getTableData(){this.rolesList=[],this.serialNumberArray=[],this.RoleService.listRoles().subscribe(i=>{console.log(i),this.totalData=i.roles.length,this.role_generals=i.roles,this.getTableDataGeneral()})}isPermision(i){return!(!this.user.roles.includes("Super-Admin")&&!this.user.permissions.includes(i))}getTableDataGeneral(){this.rolesList=[],this.serialNumberArray=[],this.role_generals.map((i,t)=>{const s=t+1;t>=this.skip&&s<=this.limit&&(this.rolesList.push(i),this.serialNumberArray.push(s))}),this.dataSource=new E.by(this.rolesList),this.calculateTotalPages(this.totalData,this.pageSize)}selectRole(i){this.role_selected=i}deleteRol(){this.RoleService.deleteRoles(this.role_selected.id).subscribe(i=>{console.log(i);let t=this.rolesList.findIndex(s=>s.id==this.role_selected.id);-1!=t&&(this.rolesList.splice(t,1),$("#delete_patient").hide(),$("#delete_patient").removeClass("show"),$(".modal-backdrop").remove(),$("body").removeClass(),$("body").removeAttr("style"),this.role_selected=null)})}searchData(i){this.dataSource.filter=i.trim().toLowerCase(),this.rolesList=this.dataSource.filteredData}sortData(i){const t=this.rolesList.slice();this.rolesList=i.active&&""!==i.direction?t.sort((s,o)=>(s[i.active]<o[i.active]?-1:1)*("asc"===i.direction?1:-1)):t}getMoreData(i){"next"==i?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral()):"previous"==i&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral())}moveToPage(i){this.currentPage=i,this.skip=this.pageSelection[i-1].skip,this.limit=this.pageSelection[i-1].limit,i>this.currentPage?this.pageIndex=i-1:i<this.currentPage&&(this.pageIndex=i+1),this.getTableDataGeneral()}PageSize(){this.pageSelection=[],this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.searchDataValue="",this.getTableDataGeneral()}calculateTotalPages(i,t){this.pageNumberArray=[],this.totalPages=i/t,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var s=1;s<=this.totalPages;s++){const o=t*s,r=o-t;this.pageNumberArray.push(s),this.pageSelection.push({skip:r,limit:o})}}static#e=this.\u0275fac=function(t){return new(t||v)(e.Y36(_))};static#t=this.\u0275cmp=e.Xpm({type:v,selectors:[["app-list-role-user"]],decls:69,vars:12,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],[1,"add-group"],["routerLink","/roles/register",1,"btn","btn-primary","add-pluss","ms-2"],["src","assets/img/icons/plus.svg","alt",""],["href","javascript:;",1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],[1,"col-auto","text-end","float-end","ms-auto","download-grp"],["href","javascript:;",1,"me-2"],["src","assets/img/icons/pdf-icon-01.svg","alt",""],["src","assets/img/icons/pdf-icon-02.svg","alt",""],["src","assets/img/icons/pdf-icon-03.svg","alt",""],["href","javascript:;"],["src","assets/img/icons/pdf-icon-04.svg","alt",""],[1,"table-responsive"],["matSort","",1,"table","border-0","custom-table","comman-table","datatable","mb-0",3,"matSortChange"],["mat-sort-header","name"],["mat-sort-header","permisos"],["mat-sort-header","created_at"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],[1,"text-end"],["class","dropdown dropdown-action",4,"ngIf"],["role","dialog",1,"modal","fade","delete-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center"],["src","assets/img/sent.png","alt","","width","50","height","46"],[4,"ngIf"],[1,"m-t-20"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1"],["type","submit",1,"btn","btn-danger",3,"click"],[1,"dropdown","dropdown-action"],["href","javascript:void(0);","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item",3,"routerLink",4,"ngIf"],["class","dropdown-item","href","javascript:void(0);","data-bs-toggle","modal",3,"click",4,"ngIf"],[1,"dropdown-item",3,"routerLink"],[1,"fa-solid","fa-pen-to-square","m-r-5"],["href","javascript:void(0);","data-bs-toggle","modal",1,"dropdown-item",3,"click"],[1,"fa","fa-trash-alt","m-r-5"],["class","page-item",3,"hidden","click",4,"ngIf"],[1,"page-item",3,"hidden","click"],["href","javascript:void(0);",1,"page-link"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8,"Roles y Permisos "),e.qZA()(),e.TgZ(9,"li",6),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"li",9),e._uU(12,"Role List"),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"h3"),e._uU(22,"Role List"),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"input",18),e.NdJ("ngModelChange",function(r){return s.searchDataValue=r})("ngModelChange",function(){return s.searchData(s.searchDataValue)}),e.qZA(),e.TgZ(26,"a",19),e._UZ(27,"img",20),e.qZA()(),e.TgZ(28,"div",21)(29,"a",22),e._UZ(30,"img",23),e.qZA(),e.TgZ(31,"a",24),e.NdJ("click",function(){return s.PageSize()}),e._UZ(32,"img",25),e.qZA()()()()(),e.TgZ(33,"div",26)(34,"a",27),e._UZ(35,"img",28),e.qZA(),e.TgZ(36,"a",27),e._UZ(37,"img",29),e.qZA(),e.TgZ(38,"a",27),e._UZ(39,"img",30),e.qZA(),e.TgZ(40,"a",31),e._UZ(41,"img",32),e.qZA()()()(),e.TgZ(42,"div",33)(43,"table",34),e.NdJ("matSortChange",function(r){return s.sortData(r)}),e.TgZ(44,"thead")(45,"tr")(46,"th",35),e._uU(47,"Nombre"),e.qZA(),e.TgZ(48,"th",36),e._uU(49,"Permisos"),e.qZA(),e.TgZ(50,"th",37),e._uU(51,"Fecha de registro"),e.qZA(),e._UZ(52,"th"),e.qZA()(),e.TgZ(53,"tbody"),e.YNc(54,M,20,6,"tr",38),e.qZA()(),e.TgZ(55,"div",39)(56,"div",40)(57,"div",41),e._uU(58),e.qZA()(),e.TgZ(59,"div",42)(60,"div",43)(61,"ul",44)(62,"li",45)(63,"a",46),e.NdJ("click",function(){return s.getMoreData("previous")}),e._uU(64,"Previous"),e.qZA()(),e.YNc(65,O,6,6,"ng-container",38),e.TgZ(66,"li",45)(67,"a",47),e.NdJ("click",function(){return s.getMoreData("next")}),e._uU(68,"Next "),e.qZA()()()()()()()()()()()()()),2&t&&(e.xp6(25),e.Q6J("ngModel",s.searchDataValue),e.xp6(29),e.Q6J("ngForOf",s.rolesList),e.xp6(4),e.lnq(" Showing ",s.serialNumberArray[0]," to ",s.serialNumberArray[s.serialNumberArray.length-1]," of ",s.totalData," entries "),e.xp6(4),e.Q6J("ngClass",e.VKq(8,x,1===s.currentPage)),e.xp6(3),e.Q6J("ngForOf",s.pageNumberArray),e.xp6(1),e.Q6J("ngClass",e.VKq(10,x,s.currentPage===s.pageNumberArray[s.pageNumberArray.length-1]||0===s.rolesList.length)))},dependencies:[c.mk,c.sg,c.O5,p.rH,a.Fj,a.JJ,a.On]})}function Q(n,i){1&n&&(e.TgZ(0,"div",15)(1,"div",26)(2,"div",27)(3,"strong"),e._uU(4,"Error!"),e.qZA(),e._uU(5," ES NECESARIO LLENAR UN NOMBRE Y SELECCIONAR UN PERMISO. "),e.TgZ(6,"button",28),e._UZ(7,"span",29),e.qZA()()()())}function Y(n,i){1&n&&(e.TgZ(0,"div",15)(1,"div",26)(2,"div",30)(3,"strong"),e._uU(4,"Exito!"),e.qZA(),e._uU(5," EL ROL SE EDITO CORRECTAMENTE. "),e.TgZ(6,"button",28),e._UZ(7,"span",29),e.qZA()()()())}function B(n,i){if(1&n&&(e.TgZ(0,"div",15)(1,"div",26)(2,"div",31)(3,"strong"),e._uU(4,"!"),e.qZA(),e._uU(5),e.TgZ(6,"button",28),e._UZ(7,"span",29),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",t.text_validation,". ")}}function j(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",34)(2,"label")(3,"input",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw(3);return e.KtG(m.addPermission(r))}),e.qZA(),e._uU(4),e.qZA()(),e.BQk()}if(2&n){const t=i.$implicit,s=e.oxw(3);e.xp6(3),e.Q6J("checked",s.permissions.includes(t.permision)),e.xp6(1),e.hij(" ",t.menuValue," ")}}function z(n,i){if(1&n&&(e.TgZ(0,"div",33),e.YNc(1,j,5,2,"ng-container",25),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.subMenus)}}function G(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",34)(2,"label")(3,"input",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.addPermission(o))}),e.qZA(),e._uU(4),e.qZA()()()}if(2&n){const t=e.oxw().$implicit,s=e.oxw();e.xp6(3),e.Q6J("checked",s.permissions.includes(t.permision)),e.xp6(1),e.hij(" ",t.menuValue," ")}}function V(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e.YNc(5,z,2,1,"div",32),e.YNc(6,G,5,2,"div",32),e.qZA()(),e.BQk()),2&n){const t=i.$implicit;e.xp6(3),e.Oqu(t.menuValue),e.xp6(2),e.Q6J("ngIf",t.subMenus&&t.subMenus.length>0),e.xp6(1),e.Q6J("ngIf",t.subMenus&&0==t.subMenus.length)}}class f{constructor(i,t,s){this.DataService=i,this.RoleService=t,this.activedRoute=s,this.sideBar=[],this.name="",this.permissions=[],this.valid_form=!1,this.valid_form_success=!1,this.text_validation=null}ngOnInit(){this.sideBar=this.DataService.sideBar[0].menu,this.activedRoute.params.subscribe(i=>{this.role_id=i.id}),this.showRole()}showRole(){this.RoleService.showRoles(this.role_id).subscribe(i=>{console.log(i),this.name=i.name,this.permissions=i.permision_pluck})}addPermission(i){if(i.permision){let t=this.permissions.findIndex(s=>s==i.permision);-1!=t?this.permissions.splice(t,1):this.permissions.push(i.permision),console.log(this.permissions)}}save(){if(this.valid_form=!1,!this.name||0==this.permissions.length)return void(this.valid_form=!0);let i={name:this.name,permisions:this.permissions};this.valid_form_success=!1,this.text_validation=null,this.RoleService.editRoles(i,this.role_id).subscribe(t=>{console.log(t),403!=t.message?this.valid_form_success=!0:this.text_validation=t.message_text})}static#e=this.\u0275fac=function(t){return new(t||f)(e.Y36(A.D),e.Y36(_),e.Y36(p.gz))};static#t=this.\u0275cmp=e.Xpm({type:f,selectors:[["app-edit-role-user"]],decls:46,vars:6,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card-box"],[1,"card-title"],["action","#"],[1,"form-group","row"],[1,"col-form-label","col-md-2"],[1,"col-md-10"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","text-end"],[1,"btn","btn-primary",3,"click"],["class","form-group row",4,"ngIf"],[1,"card-block"],[1,"table-responsive"],[1,"table","table-bordered","mb-0"],[4,"ngFor","ngForOf"],[1,"col-md-8"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["class","",4,"ngIf"],[1,""],[1,"checkbox"],["type","checkbox","name","checkbox",3,"checked","click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),e._uU(8,"Roles y Permisos "),e.qZA()(),e.TgZ(9,"li",6),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"li",9),e._uU(12,"Edici\xf3n"),e.qZA()()()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"h4",13),e._uU(17),e.qZA(),e.TgZ(18,"form",14)(19,"div",15)(20,"label",16),e._uU(21,"Nombre"),e.qZA(),e.TgZ(22,"div",17)(23,"input",18),e.NdJ("ngModelChange",function(r){return s.name=r}),e.qZA()()(),e.TgZ(24,"div",15)(25,"div",19)(26,"button",20),e.NdJ("click",function(){return s.save()}),e._uU(27,"EDITAR"),e.qZA()()(),e.YNc(28,Q,8,0,"div",21),e.YNc(29,Y,8,0,"div",21),e.YNc(30,B,8,1,"div",21),e.qZA()()(),e.TgZ(31,"div",11)(32,"div",12)(33,"h4",13),e._uU(34,"Asignaci\xf3n de Permisos"),e.qZA(),e.TgZ(35,"div",22)(36,"div",23)(37,"table",24)(38,"thead")(39,"tr")(40,"th"),e._uU(41,"Secci\xf3n"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Permisos"),e.qZA()()(),e.TgZ(44,"tbody"),e.YNc(45,V,7,3,"ng-container",25),e.qZA()()()()()()()()()),2&t&&(e.xp6(17),e.hij("Editar Rol : ",s.name,""),e.xp6(6),e.Q6J("ngModel",s.name),e.xp6(5),e.Q6J("ngIf",s.valid_form),e.xp6(1),e.Q6J("ngIf",s.valid_form_success),e.xp6(1),e.Q6J("ngIf",s.text_validation),e.xp6(15),e.Q6J("ngForOf",s.sideBar))},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}const K=[{path:"",component:g,children:[{path:"register",component:h},{path:"list",component:v},{path:"list/edit/:id",component:f}]}];class Z{static#e=this.\u0275fac=function(t){return new(t||Z)};static#t=this.\u0275mod=e.oAB({type:Z});static#i=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(K),p.Bz]})}class b{static#e=this.\u0275fac=function(t){return new(t||b)};static#t=this.\u0275mod=e.oAB({type:b});static#i=this.\u0275inj=e.cJS({imports:[c.ez,Z,a.u5,a.UX,d.JF,p.Bz]})}}}]);